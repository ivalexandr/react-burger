{"version":3,"sources":["components/ModalOverlay/style.module.css","components/Preloader/style.module.css","components/BurgerIngredientsCategory/style.module.css","components/OrderList/style.module.css","components/OrderItemDetails/style.module.css","components/IngredientsDetails/style.module.css","components/AppHeader/style.module.css","redux/hooks.ts","components/AppHeader/AppHeader.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","images/success.gif","services/cookie.ts","services/api-services.ts","redux/actions.ts","redux/modal/modalSlice.ts","components/Preloader/Preloader.tsx","redux/constructor/constructorSlice.ts","components/OrderDetails/OrderDetails.tsx","components/ProtectRoute/ProtectRoute.tsx","redux/ingredients/ingredientsSlice.ts","components/IngredientsDetails/IngredientsDetails.tsx","components/BurgerIngredientsItem/BurgerIngredientsItem.tsx","components/BurgerIngredientsCategory/BurgerIngredientsCategory.tsx","services/myHooks/useTabs.ts","components/BurgerIngredients/BurgerIngredients.tsx","components/BurgerConstructorItem/BurgerConstructorItem.tsx","components/BurgerConstructor/BurgerConstructor.tsx","pages/main.tsx","pages/404.tsx","components/AuthForm/AuthForm.tsx","pages/register.tsx","pages/login.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","components/FeedItem/FeedItem.tsx","components/OrderList/OrderList.tsx","components/OrderFeed/OrderFeed.tsx","redux/webSocket/wsSlice.ts","pages/feed.tsx","components/ProfileNavBar/ProfileNavBar.tsx","components/ProfileForm/ProfileForm.tsx","pages/profile-info.tsx","pages/profile.tsx","pages/profile-list.tsx","components/OrderItemDetails/OrderItemDetails.tsx","components/Routers/Routers.tsx","components/App/App.tsx","redux/auth/authSlice.ts","redux/store.ts","redux/middlewares/wsMiddleware.ts","index.tsx","components/FeedItem/style.module.css","components/OrderFeed/style.module.css","components/OrderDetails/style.module.css","components/BurgerConstructor/style.module.css","components/AuthForm/style.module.css","components/ProfileNavBar/style.module.css","components/ProfileForm/style.module.css","components/BurgerIngredientsItem/style.module.css","components/Modal/style.module.css","components/BurgerIngredients/style.module.css","components/BurgerConstructorItem/style.module.css"],"names":["module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","AppHeader","main","useRouteMatch","feed","feedId","profile","profileOrders","profileOrdersItem","className","s","header","wrapper","menu","list","exact","to","pathname","link","activeClassName","active","type","isExact","dark","ModalOverlay","children","closedFunction","history","useHistory","useEffect","window","addEventListener","handleDownKeyEsc","removeEventListener","e","key","goBack","onClick","target","classList","contains","overlay","Modal","props","$el","document","getElementById","createPortal","this","modal","title","close","data-cy","Component","setCookie","name","value","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","generateApiUrl","address","apiServices","apiUrlIngredients","apiUrlOrders","apiRegisterUser","apiLoginUser","apiLogoutUser","apiRefreshToken","apiResetPassSearch","apiResetPass","apiGetUserData","res","ok","json","then","Promise","reject","api","options","a","fetch","checkResponse","message","refreshToken","refresh","localStorage","setItem","accessToken","split","headers","Autorization","Error","data","id","map","item","_id","isBun","find","length","body","ingredients","method","JSON","stringify","mode","cache","credentials","redirect","referrerPolicy","token","getItem","email","fetchRefreshData","Authorization","number","getIngredients","createAsyncThunk","getDataFromDataBase","getOrderNumber","getOrderedNumber","resetPasswordSearch","resetPassword","loginUser","registerUser","getUserData","setUserData","logoutUser","getOrderItem","modalSlice","createSlice","initialState","isShowOrder","status","order","reducers","showOrderModal","state","payload","removeOrder","extraReducers","builder","addCase","pending","fulfilled","action","rejected","actions","Preloader","loader","constructorSlice","bun","isBunEmpty","pushItem","push","now","setBuns","findIndex","splice","setBun","sortArray","idFrom","idTo","removeItem","checkBunEmpty","cleanConstructor","OrderDetails","dispatch","store","MODAL","subtitle","image","src","img","alt","bottom","ProtectRoute","location","useLocation","render","ingredientsSlice","ingredient","getIngredient","filter","cleanIngredients","IngredientsDetails","isModal","useParams","INGREDIENTS","cn","nomodal","image_large","descr","food","calories","proteins","fat","carbohydrates","BurgerIngredientsItem","srcImage","price","CONSTRUCTOR","useState","counter","setCounter","useDrag","collect","monitor","isDrag","isDragging","ingredientItem","end","itemId","handleDrop","dragRef","background","ref","draggable","count","BurgerIngredientsCategory","refCategory","items","useTabs","container","setState","useRef","current","getBoundingClientRect","top","textContent","BurgerIngredients","setCurrent","sauces","mains","buns","containerRef","bunsRef","getBuns","saucesRef","getSauces","mainsRef","getMains","style","display","categories","onScroll","BurgerConstructorItem","index","isLocked","drag","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","getClientOffset","y","drop","opacity","data-handler-id","icon","text","thumbnail","handleClose","BurgerConstructor","dataConstructor","user","AUTH","onDropHandler","isHover","isOver","dropTarget","section","image_mobile","constructor","total","reduce","acc","size","Main","padding","DndProvider","backend","HTML5Backend","Page404","AuthForm","headingText","buttonText","emailText","passText","password","setValue","onChangeHandler","prev","form","onSubmit","preventDefault","placeholder","onChange","Register","registerStatus","Login","ForgotPassword","ResetPassword","FeedItem","ingredientsId","date","ingredientsImages","nowDate","dataString","getFullYear","getMonth","getDate","dateOrder","slice","timeOrder","canceled","done","preparing","footer","images","round","round_more","calcTotal","OrderList","SOCKETS","dataIngredients","createdAt","OrderFeed","totalToday","statistic","inWork","allDone","allDay","wsSlice","wsStatus","statusGetOrder","wsConnectionStart","wsConnectionSuccess","error","wsConnectionFailed","wsConnectionClosed","wsGetMessage","orders","wsSendMessage","wsCloseSocketConnection","Feed","ProfileNavBar","navbar","ProfileForm","changeHandler","button","ProfileInfo","Profile","ProfileList","urlUser","OrderItemDetails","getStatusIngredients","filterToIngredients","toString","info","structure","Routers","bg","App","refreshStatus","authSlice","resetPasswordStatus","stateHistory","configureStore","reducer","middleware","getDefaultMiddleware","concat","logger","socket","next","WebSocket","onopen","onerror","onmessage","parse","onclose","code","send","devTools","process","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.f652a4fd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"style_overlay__3J7R6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"style_loader__LVQLP\",\"spin\":\"style_spin__3dEiT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"style_list__1gkw8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"style_list__QNExm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__3TzVS\",\"info\":\"style_info__c7ZWw\",\"header\":\"style_header__2PH4M\",\"status\":\"style_status__1OCLz\",\"structure\":\"style_structure__2igHX\",\"list\":\"style_list__13F-L\",\"item\":\"style_item__25r23\",\"img\":\"style_img__LpNFH\",\"price\":\"style_price__3pUYU\",\"footer\":\"style_footer__32R2F\",\"total\":\"style_total__2QHBt\",\"canceled\":\"style_canceled__2WABG\",\"done\":\"style_done__uGrCv\",\"preparing\":\"style_preparing__jIc7d\",\"nomodal\":\"style_nomodal__19yge\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__1nxMU\",\"image\":\"style_image__CkfkN\",\"descr\":\"style_descr__1yPck\",\"food\":\"style_food__pqgVN\",\"item\":\"style_item__1fC_y\",\"number\":\"style_number__3kQOq\",\"nomodal\":\"style_nomodal__3kLlT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"style_header__31Mxe\",\"wrapper\":\"style_wrapper__2OT7Z\",\"link\":\"style_link__2gkr7\",\"active\":\"style_active__1C6p8\",\"menu\":\"style_menu__2xx7D\",\"list\":\"style_list__2HVf7\",\"profile\":\"style_profile__35sOJ\",\"dark\":\"style_dark__3CaJp\"};","import { TypedUseSelectorHook,useSelector, useDispatch } from \"react-redux\"\r\nimport type {AppDispatch, RootState} from './store'\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import React from 'react'\r\nimport {Logo, BurgerIcon, ListIcon, ProfileIcon} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport {match, NavLink, useRouteMatch, Link} from \"react-router-dom\";\r\nimport s from './style.module.css'\r\n\r\ntype TMatchApp = match<{}> | null\r\n\r\nconst AppHeader: React.FC = () => {\r\n    const main: TMatchApp = useRouteMatch('/')\r\n    const feed: TMatchApp = useRouteMatch('/feed')\r\n    const feedId: TMatchApp = useRouteMatch('/feed/:id')\r\n    const profile: TMatchApp = useRouteMatch('/profile')\r\n    const profileOrders: TMatchApp = useRouteMatch('/profile/orders')\r\n    const profileOrdersItem: TMatchApp = useRouteMatch('/profile/orders/:id')\r\nreturn (\r\n  <header className = {`${s.header} pt-2 pb-2`}>\r\n      <div className = {`container ${s.wrapper}`}>\r\n        <nav className = {s.menu}>\r\n        <ul className = {s.list}>\r\n          <li className = {`mr-1`}>\r\n            <NavLink exact to = {{pathname:'/'}} className = {`${s.link} text text_type_main-default`} activeClassName={s.active}>\r\n              <BurgerIcon type ={main && main?.isExact ? 'primary' : 'secondary'}/>\r\n              <span className = \"ml-1\">Конструктор</span>\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to = {{pathname:\"/feed\"}} className = {`${s.link} text text_type_main-default`} activeClassName={s.active}>\r\n              <ListIcon type ={(feed && feed?.isExact) ||  (feed && feedId?.isExact) ? 'primary' : 'secondary'} />\r\n              <span className = {`${s.dark} ml-1`}>Лента заказов</span>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n        <Link to = \"/\">\r\n          <Logo />\r\n        </ Link>\r\n      <NavLink to = {{pathname:\"/profile\"}} className = {`${s.link} ${s.profile} text text_type_main-default`} activeClassName={s.active}>\r\n          <ProfileIcon type ={(profile && profile?.isExact) || (profile && profileOrders?.isExact) || (profile && profileOrdersItem?.isExact) ? 'primary' : 'secondary'}/>\r\n              <span className = {`${s.dark} ml-1`}>Личный кабинет</span>\r\n      </NavLink>\r\n      </div>\r\n  </header>\r\n)\r\n}\r\nexport default AppHeader","import React, { useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsModal {\r\n  closedFunction?: () => void\r\n}\r\n\r\nconst ModalOverlay: React.FC<IPropsModal> = ({ children, closedFunction }) => {\r\n  const history = useHistory()\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleDownKeyEsc)\r\n    return () => {\r\n      window.removeEventListener('keydown', handleDownKeyEsc)\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  const handleDownKeyEsc = (e: KeyboardEvent): void => {\r\n    if (e.key !== 'Escape') {\r\n      return\r\n    }\r\n    closedFunction && closedFunction()\r\n    history && history.goBack()\r\n  }\r\n\r\n  const handleClickOverlay = (e: any): void => {\r\n    if (\r\n      e.target.classList.contains('overlay__closed') ||\r\n      e.target.classList.contains('closed')\r\n    ) {\r\n      closedFunction && closedFunction()\r\n      history && history.goBack()\r\n    }\r\n  }\r\n  return (\r\n    <div\r\n      onClick={handleClickOverlay}\r\n      className={`${s.overlay} overlay__closed`}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\nexport default ModalOverlay\r\n","import { Component } from 'react'\r\nimport {createPortal} from 'react-dom'\r\nimport ModalOverlay from '../ModalOverlay/ModalOverlay'\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsModal{\r\n  title?: string\r\n  closedFunction?:() => void\r\n}\r\n\r\nclass Modal extends Component <IPropsModal> {\r\n  private $el: HTMLElement | null\r\n  constructor(props: IPropsModal) {\r\n    super(props)\r\n    this.$el = document.getElementById('app-modals')\r\n  }\r\n  render() {\r\n    return createPortal(\r\n      <ModalOverlay closedFunction = {this.props.closedFunction}>\r\n        <div className={`${s.modal} pt-5 pl-5 pr-5`}>\r\n          <div className={s.header}>\r\n            <span className='text text_type_main-large'>\r\n              {this.props.title}\r\n            </span>\r\n            <span className={`${s.close} closed`} data-cy = \"close\">\r\n              <CloseIcon type = \"primary\"/>\r\n            </span>\r\n          </div>\r\n          {this.props.children}\r\n        </div>\r\n      </ModalOverlay>,\r\n       // @ts-ignore: Unreachable code error\r\n      this.$el\r\n    )\r\n  }\r\n}\r\n\r\nexport default Modal\r\n","export default __webpack_public_path__ + \"static/media/success.887b83be.gif\";","\r\ntype TPropsCookie = {\r\n[key: string]: string | boolean\r\n}\r\n\r\nconst setCookie = (name: string, value: string, props?: TPropsCookie): void => {\r\n  props = props || {}\r\n  props = {\r\n    path: '/',\r\n    ...props\r\n  }\r\n  let exp = props.expires\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date()\r\n    d.setTime(d.getTime() + exp * 1000)\r\n    exp = props.expires = d.toUTCString()\r\n  }\r\n  if (exp) {\r\n    props.expires = exp\r\n  }\r\n  value = encodeURIComponent(value)\r\n  let updatedCookie = name + '=' + value\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName\r\n    const propValue = props[propName]\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue\r\n    }\r\n  }\r\n  document.cookie = updatedCookie\r\n}\r\nconst getCookie = (name: string): string | undefined => {\r\n  const matches = document.cookie.match(\r\n    // eslint-disable-next-line\r\n    new RegExp(\r\n      '(?:^|; )' + // eslint-disable-next-line\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\r\n        '=([^;]*)'\r\n    )\r\n  )\r\n  return matches ? decodeURIComponent(matches[1]) : undefined\r\n}\r\n\r\nexport { setCookie, getCookie }\r\n","import { TObjectIngredient, TObjectOrder } from '../types'\r\nimport { getCookie, setCookie } from './cookie'\r\n\r\n\r\nconst generateApiUrl = (address: string): string => {\r\n  return `https://norma.nomoreparties.space/api/${address}`\r\n}\r\ninterface ICheckResponse {\r\n  user:{\r\n    name: string\r\n    email: string\r\n  }\r\n}\r\ninterface ILoginData extends ICheckResponse{\r\n  refreshToken: string\r\n  accessToken: string\r\n}\r\nclass ApiServices {\r\n  private apiUrlIngredients: string\r\n  private apiUrlOrders: string\r\n  private apiRegisterUser: string\r\n  private apiLoginUser: string\r\n  private apiLogoutUser: string\r\n  private apiRefreshToken: string\r\n  private apiResetPassSearch: string\r\n  private apiResetPass: string\r\n  private apiGetUserData: string\r\n  constructor() {\r\n    this.apiUrlIngredients = generateApiUrl(`ingredients`)\r\n    this.apiUrlOrders = generateApiUrl('orders')\r\n    this.apiRegisterUser = generateApiUrl('auth/register')\r\n    this.apiLoginUser = generateApiUrl('auth/login')\r\n    this.apiLogoutUser = generateApiUrl('auth/logout')\r\n    this.apiRefreshToken = generateApiUrl('auth/token')\r\n    this.apiResetPassSearch = generateApiUrl('password-reset')\r\n    this.apiResetPass = generateApiUrl('password-reset/reset')\r\n    this.apiGetUserData = generateApiUrl('auth/user')\r\n  }\r\n\r\n  checkResponse(res: Response):Promise<ICheckResponse> {\r\n    return res.ok ? res.json() : res.json().then((e:Error) => Promise.reject(e))\r\n  }\r\n  async fetchRefreshData(api: string, options:RequestInit ) {\r\n    try {\r\n      const res: Response = await fetch(api, options)\r\n    return await this.checkResponse(res)\r\n    } catch (e: any) {\r\n      if (e.message === 'jwt expired') {\r\n        const refresh = await this.refreshToken()\r\n        localStorage.setItem('refreshToken', refresh.refreshToken)\r\n        setCookie('accessToken', refresh.accessToken.split('Bearer ')[1]);\r\n        (options!.headers as {[key:string]: string}).Autorization = `Bearer ${refresh.refreshToken}`\r\n        const res = await fetch(api, options)\r\n        return await this.checkResponse(res)\r\n      } else {\r\n        return Promise.reject()\r\n      }\r\n    }\r\n  }\r\n  async getDataFromDataBase(): Promise<{data: Array<TObjectIngredient>, status: string}> {\r\n    try {\r\n      const res: Response = await fetch(this.apiUrlIngredients)\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e:any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async getOrderedNumber(data: Array<TObjectIngredient>):Promise<{order: {number: number}}> {\r\n    const id: Array<string | number> = data.map(item => item._id)\r\n    const isBun: TObjectIngredient | undefined = data.find(item => item.type === 'bun')\r\n    try {\r\n      if (data.length === 0)\r\n        throw new Error('Пустой массив передавать нельзя!!!')\r\n      if (isBun === undefined) throw new Error('Без булки нельзя!!!')\r\n      const body: {ingredients: Array<string | number>} = { ingredients: id }\r\n      \r\n      const res: Response = await fetch(this.apiUrlOrders, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${getCookie('accessToken')}`\r\n        },\r\n        body: JSON.stringify(body)\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e:any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async registerUser(data: {name: string, password: string, email: string}) {\r\n    try {\r\n      const res:Response = await fetch(this.apiRegisterUser, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async loginUser(data: {email: string, password: string}): Promise<ILoginData> {\r\n    try {\r\n      const res: Response = await fetch(this.apiLoginUser, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify(data)\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n\r\n  async refreshToken() {\r\n    try {\r\n      const res: Response = await fetch(this.apiRefreshToken, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify({ token: localStorage.getItem('refreshToken') })\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async resetPasswordSearch(email: {email: string}) {\r\n    try {\r\n      const res: Response = await fetch(this.apiResetPassSearch, {\r\n        method: 'POST',\r\n        body: JSON.stringify(email)\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async resetPassword(data: {}) {\r\n    try {\r\n      const res: Response = await fetch(this.apiResetPass, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async getUserData() {\r\n    return await this.fetchRefreshData(this.apiGetUserData, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${getCookie('accessToken')}`,\r\n      },\r\n    })\r\n  }\r\n\r\n  async setUserData(data: {name?: string, email?: string}) {\r\n    return await this.fetchRefreshData(this.apiGetUserData, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${getCookie('accessToken')}`,\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    }\r\n\r\n  async logoutUser() {\r\n    try {\r\n      const res: Response = await fetch(this.apiLogoutUser, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: JSON.stringify({token:localStorage.getItem('refreshToken')})\r\n      })\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n  async getOrderItem(number:string): Promise<{status: string, orders: Array<TObjectOrder>}>{\r\n    try {\r\n      const res: Response = await fetch(`${this.apiUrlOrders}/${number}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },})\r\n      if (!res.ok) throw new Error('Ответ от сервера не ОК')\r\n      return await res.json()\r\n    } catch (e: any) {\r\n      throw new Error(e)\r\n    }\r\n  }\r\n}\r\nexport const apiServices = new ApiServices()\r\n","import { TObjectIngredient } from './../types';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { apiServices } from '../services/api-services'\r\nimport { setCookie } from '../services/cookie'\r\n\r\n//INGREDIENTS__SLICE\r\nconst getIngredients = createAsyncThunk(\r\n  'INGREDIENTS/getIngredients',\r\n  async () => {\r\n    return await apiServices.getDataFromDataBase()\r\n  }\r\n)\r\n\r\n//MODAL__SLICE\r\nconst getOrderNumber = createAsyncThunk('MODAL/getOrderNumber', async (data: Array<TObjectIngredient>) => {\r\n  return await apiServices.getOrderedNumber(data)\r\n})\r\n//AUTH__SLICE\r\nconst resetPasswordSearch = createAsyncThunk(\r\n  'AUTH/resetPasswordSearch',\r\n  async (email: {email: string}) => {\r\n    return await apiServices.resetPasswordSearch(email)\r\n  }\r\n)\r\nconst resetPassword = createAsyncThunk('AUTH/resetPassword', async (data: {}) => {\r\n  return await apiServices.resetPassword(data)\r\n})\r\nconst loginUser = createAsyncThunk('AUTH/loginUser', async (data: {email: string, password: string }) => {\r\n  const res = await apiServices.loginUser(data)\r\n  setCookie('accessToken', res?.accessToken.split('Bearer ')[1])\r\n  localStorage.setItem('refreshToken', res?.refreshToken)\r\n  return res\r\n})\r\nconst refreshToken = createAsyncThunk('AUTH/refreshToken', async () => {\r\n  const res = await apiServices.refreshToken()\r\n  setCookie('accessToken', res?.accessToken.split('Bearer ')[1])\r\n  localStorage.setItem('refreshToken', res?.refreshToken)\r\n  return res\r\n})\r\nconst registerUser = createAsyncThunk('AUTH/registerUser', async (data: {name: string, email: string, password: string}) => {\r\n  return await apiServices.registerUser(data)\r\n})\r\n\r\nconst getUserData = createAsyncThunk('AUTH/getUserData', async () => {\r\n  return await apiServices.getUserData()\r\n})\r\nconst setUserData = createAsyncThunk('AUTH/setUserData', async (data: {name?: string, email?: string}) => {\r\n  return apiServices.setUserData(data)\r\n})\r\nconst logoutUser = createAsyncThunk('AUTH/logoutUser', async () => {\r\n  const res = await apiServices.logoutUser()\r\n  setCookie('accessToken','')\r\n  localStorage.setItem('refreshToken', '')\r\n  return res\r\n})\r\n// WS\r\nconst getOrderItem = createAsyncThunk('WS/getOrderItem', async (number: string) => {\r\n    const res = await apiServices.getOrderItem(number)\r\n    return res\r\n})\r\nexport {\r\n  getIngredients,\r\n  getOrderNumber,\r\n  resetPasswordSearch,\r\n  resetPassword,\r\n  registerUser,\r\n  loginUser,\r\n  refreshToken,\r\n  getUserData,\r\n  setUserData,\r\n  logoutUser,\r\n  getOrderItem\r\n}\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { getOrderNumber } from \"../actions\";\r\n\r\nexport interface IinitialState{\r\n  isShowOrder: boolean\r\n  status: string\r\n  order: number\r\n}\r\n\r\nconst initialState = {\r\n    isShowOrder:false,\r\n\r\n    status:'',\r\n    order:0,\r\n} as IinitialState\r\n\r\nconst modalSlice = createSlice({\r\n  name:'MODAL',\r\n  initialState,\r\n  reducers:{\r\n    showOrderModal(state, {payload}){\r\n      state.isShowOrder = payload\r\n    },\r\n    removeOrder(state){\r\n      state.order = 0\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(getOrderNumber.pending, (state) => {\r\n      state.status = 'loading'\r\n    })\r\n    builder.addCase(getOrderNumber.fulfilled, (state, action) => {\r\n      state.order = action.payload?.order?.number\r\n      state.status = 'success'\r\n    })\r\n    builder.addCase(getOrderNumber.rejected, (state) => {\r\n      state.status = 'failed'\r\n    })\r\n  },\r\n})\r\n\r\nexport default modalSlice.reducer\r\n\r\nexport const { showOrderModal, removeOrder } = modalSlice.actions","import React from 'react'\r\nimport s from './style.module.css'\r\n\r\nconst Preloader: React.FC = () => {\r\n  return <div className={s.loader}></div>\r\n}\r\nexport default Preloader\r\n","import { TObjectIngredient } from './../../types';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\n\r\nexport interface IinitialState {\r\n  data: Array<TObjectIngredient>\r\n  bun: TObjectIngredient | null\r\n  isBunEmpty: boolean\r\n}\r\nconst initialState = {\r\n  data: [],\r\n  bun: null,\r\n  isBunEmpty:false,\r\n} as IinitialState\r\n\r\nconst constructorSlice = createSlice({\r\n  name: 'CONSTRUCTOR',\r\n  initialState,\r\n  reducers: {\r\n    pushItem(state, action: PayloadAction<TObjectIngredient>) {\r\n      state.data.push({...action.payload, key:Date.now()})\r\n    },\r\n    setBuns(state, action: PayloadAction<TObjectIngredient>) {\r\n      const index = state.data.findIndex(item => item.type === 'bun')\r\n      if (index !== -1)\r\n        state.data.splice(\r\n          state.data.findIndex(item => item.type === 'bun'),\r\n          1,\r\n          action.payload\r\n        )\r\n      else state.data.push(action.payload)\r\n    },\r\n    setBun(state, action: PayloadAction<TObjectIngredient>) {\r\n      state.bun = action.payload\r\n    },\r\n    sortArray(state, action: PayloadAction<{idFrom: number, idTo: number}>) {\r\n      const { idFrom, idTo } = action.payload\r\n      state.data.splice(idTo, 0, state.data.splice(idFrom, 1)[0])\r\n    },\r\n    removeItem(state, action: PayloadAction<number>) {\r\n      state.data.splice(action.payload, 1)\r\n    },\r\n    checkBunEmpty(state, action: PayloadAction<boolean>){\r\n      state.isBunEmpty = action.payload\r\n    },\r\n    cleanConstructor(state){\r\n      state.data = []\r\n      state.bun = null\r\n    }\r\n  }\r\n})\r\n\r\nexport default constructorSlice.reducer\r\nexport const { pushItem, setBuns, setBun, sortArray, removeItem, checkBunEmpty, cleanConstructor } =\r\n  constructorSlice.actions\r\n","import React, { ReactElement } from 'react'\r\nimport { useAppSelector, useAppDispatch } from '../../redux/hooks'\r\nimport Modal from '../Modal/Modal'\r\nimport img from '../../images/success.gif'\r\nimport s from './style.module.css'\r\nimport { showOrderModal, removeOrder } from '../../redux/modal/modalSlice'\r\nimport Preloader from '../Preloader/Preloader'\r\nimport { cleanConstructor } from '../../redux/constructor/constructorSlice'\r\n\r\nconst OrderDetails: React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const order = useAppSelector(store => store.MODAL.order)\r\n  const status = useAppSelector(store => store.MODAL.status)\r\n  const close = () => {\r\n    dispatch(cleanConstructor())\r\n    dispatch(removeOrder())\r\n    dispatch(showOrderModal(false))\r\n  }\r\n  const render = (): ReactElement => {\r\n    if (status === 'loading') return <Preloader />\r\n    if (status === 'success')\r\n      return (\r\n        <div className={s.wrapper}>\r\n          <h2 className={`${s.title} mt-2`}> {order}</h2>\r\n          <span className={`${s.subtitle} text text_type_main-medium mt-4`}>\r\n            идентификатор заказа\r\n          </span>\r\n          <div className={`${s.image}`}>\r\n            <img src={img} alt='success'></img>\r\n          </div>\r\n          <div className={`${s.bottom}`}>\r\n            <span className='text text_type_main-default'>\r\n              Ваш заказ начали готовить\r\n            </span>\r\n            <span className={`${s.dark} text text_type_main-default mt-1`}>\r\n              Дождитесь готовности на орбитальной станции\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )\r\n    if (status === 'failed') return <h2>Ошибка подключения</h2>\r\n    return <Preloader />\r\n  }\r\n  return <Modal closedFunction={close}>{render()}</Modal>\r\n}\r\n\r\nexport default OrderDetails\r\n","import React from 'react'\r\nimport { Route, Redirect, useLocation, RouteProps } from 'react-router-dom'\r\n\r\nconst ProtectRoute: React.FC<RouteProps> = ({ children, ...props }) => {\r\n  const location = useLocation()\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={() =>\r\n        localStorage.getItem('refreshToken') ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: location }} />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default ProtectRoute\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { TObjectIngredient } from '../../types'\r\nimport { getIngredients } from '../actions'\r\n\r\nexport interface IInitialState{\r\n  data: Array<TObjectIngredient>\r\n  status: null | string\r\n  ingredient: TObjectIngredient | null\r\n}\r\n\r\nconst initialState = {\r\n    data: [],\r\n    status: '',\r\n    ingredient: null\r\n} as IInitialState\r\n\r\nconst ingredientsSlice = createSlice({\r\n  name: 'INGREDIENTS',\r\n  initialState,\r\n  reducers:{\r\n    getIngredient(state, action){\r\n      state.ingredient = state.data.filter(\r\n        item => item._id === action.payload\r\n      )[0]\r\n    },\r\n    cleanIngredients(state){\r\n      state.ingredient = null\r\n    }\r\n  },\r\n  extraReducers:(builder) => {\r\n    builder.addCase(getIngredients.pending, (state) => {\r\n      state.status = 'loading'\r\n    })\r\n    builder.addCase(getIngredients.fulfilled, (state, action) => {\r\n      state.data = action.payload.data\r\n      state.status = 'success'\r\n    })\r\n    builder.addCase(getIngredients.rejected, (state) => {\r\n    state.status = 'failed'\r\n    })\r\n  }\r\n})\r\n\r\nexport default ingredientsSlice.reducer\r\nexport const { getIngredient, cleanIngredients } = ingredientsSlice.actions","import React, { useEffect } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useAppSelector, useAppDispatch } from '../../redux/hooks'\r\nimport Preloader from '../Preloader/Preloader'\r\nimport cn from 'classnames'\r\nimport s from './style.module.css'\r\nimport { getIngredient } from '../../redux/ingredients/ingredientsSlice'\r\n\r\ninterface IPropsIngredientsDetails {\r\n  isModal?: boolean\r\n}\r\n\r\nconst IngredientsDetails: React.FC<IPropsIngredientsDetails> = ({ isModal }) => {\r\n  const { id } = useParams<{ id: string }>()\r\n  const dispatch = useAppDispatch()\r\n \r\n  const { item, status } = useAppSelector(store => ({\r\n    item: store.INGREDIENTS.ingredient,\r\n    status: store.INGREDIENTS.status\r\n  }))\r\n  useEffect(() => {\r\n    dispatch(getIngredient(id))\r\n    // eslint-disable-next-line\r\n  }, [status])\r\n  const render = () => {\r\n    if (status === 'loading') return <Preloader />\r\n    if (status === 'success' && item) return (\r\n          <div className={cn(s.wrapper, {[s.nomodal]: !isModal})}>\r\n            <div className={s.image}>\r\n              <img src={item!.image_large} alt={item!.name} />\r\n            </div>\r\n            <h3 className={`${s.name} text text_type_main-medium`}>{item!.name}</h3>\r\n            <p className={`${s.descr} mt-4 text text_type_main-default`}>\r\n              API не возвращает описание ингредиента\r\n            </p>\r\n            <div className={`${s.food} text text_type_main-default`}>\r\n              <div className={s.item}>\r\n                <span>Калории,ккал</span>\r\n                <span\r\n                  className={`${s.number} text text_type_digits-default mt-1`}>\r\n                  {item!.calories}\r\n                </span>\r\n              </div>\r\n              <div className={s.item}>\r\n                <span>Белки, г</span>\r\n                <span\r\n                  className={`${s.number} text text_type_digits-default mt-1`}>\r\n                  {item!.proteins}\r\n                </span>\r\n              </div>\r\n              <div className={s.item}>\r\n                <span>Жиры, г</span>\r\n                <span\r\n                  className={`${s.number} text text_type_digits-default mt-1`}>\r\n                  {item!.fat}\r\n                </span>\r\n              </div>\r\n              <div className={s.item}>\r\n                <span>Углеводы, г</span>\r\n                <span\r\n                  className={`${s.number} text text_type_digits-default mt-1`}>\r\n                  {item!.carbohydrates}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      )\r\n      return null\r\n  }\r\n  return render()\r\n}\r\nexport default IngredientsDetails\r\n","import React, { MouseEvent } from 'react'\r\nimport { useState, useEffect } from 'react'\r\nimport { useAppSelector } from '../../redux/hooks'\r\nimport {\r\n  Counter,\r\n  CurrencyIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useDrag } from 'react-dnd'\r\nimport cn from 'classnames'\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport { TObjectIngredient, TObjectItemDnd } from '../../types'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsIngredient {\r\n  srcImage: string\r\n  price: number\r\n  name: string\r\n  ingredient: TObjectIngredient\r\n  id: number | string\r\n}\r\n\r\nconst BurgerIngredientsItem: React.FC<IPropsIngredient> = ({\r\n  srcImage,\r\n  price,\r\n  name,\r\n  ingredient,\r\n  id\r\n}) => {\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n\r\n  const ingredients = useAppSelector(store => store.CONSTRUCTOR.data)\r\n  const [counter, setCounter] = useState<number | null>(null)\r\n\r\n  const [{ isDrag }, dragRef] = useDrag({\r\n    type: 'ingredient',\r\n    item: { id, ingredient },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n      ingredientItem: monitor.getItem()\r\n    }),\r\n    end(itemId: TObjectItemDnd) {\r\n      handleDrop(itemId)\r\n    }\r\n  })\r\n  useEffect(() => {\r\n    setCounter(ingredients.filter(item => item._id === ingredient._id).length)\r\n    // eslint-disable-next-line\r\n  }, [ingredients])\r\n  const handleDrop = (itemId: any): void => {\r\n    setCounter(ingredients.filter(item => item._id === itemId.id).length)\r\n  }\r\n  const clickHandler: React.EventHandler<MouseEvent> = (): void => {\r\n    history.push({\r\n      pathname: `/ingredients/${id}`,\r\n      state: { background: location }\r\n    })\r\n  }\r\n  return (\r\n    <li\r\n      onClick={clickHandler}\r\n      className={cn(s.item, 'mr-3', 'mb-4', { [s.active]: isDrag })}\r\n      ref={dragRef}\r\n      draggable\r\n      data-cy='li-test'>\r\n      {ingredient.type === 'bun' ? null : counter ? (\r\n        <Counter count={counter} />\r\n      ) : null}\r\n      <div className={s.img}>\r\n        <img src={srcImage} alt={name} />\r\n      </div>\r\n      <span className={`${s.price} mt-1`}>\r\n        <span className='mr-1'>{price}</span> <CurrencyIcon type='primary' />\r\n      </span>\r\n      <h3 className={`text text_type_main-default mt-1`}>{name}</h3>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default BurgerIngredientsItem\r\n","import React, { RefObject } from 'react'\r\nimport { TObjectIngredient } from '../../types'\r\nimport BurgerIngredientsItem from '../BurgerIngredientsItem/BurgerIngredientsItem'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsIngredientsCategory {\r\n  refCategory: RefObject<HTMLHeadingElement>\r\n  type: string\r\n  items: Array<TObjectIngredient>\r\n}\r\n\r\nconst BurgerIngredientsCategory: React.FC<IPropsIngredientsCategory> = ({\r\n  refCategory,\r\n  type,\r\n  items\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h3 ref={refCategory}>{type}</h3>\r\n      <ul className={s.list}>\r\n        {items.map((item: TObjectIngredient) => {\r\n          return (\r\n            <BurgerIngredientsItem\r\n              key={item._id}\r\n              srcImage={item.image}\r\n              price={item.price}\r\n              name={item.name}\r\n              ingredient={item}\r\n              id={item._id}\r\n            />\r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BurgerIngredientsCategory\r\n","import { useRef } from 'react'\r\n\r\n\r\nconst useTabs = (container:HTMLDivElement | null, setState:Function): [any, Function] => {\r\n    const ref = useRef<HTMLHeadingElement>()\r\n    const getTop = (): void => {\r\n      if(!container || !ref || !ref.current) return\r\n      const top = ref?.current?.getBoundingClientRect()?.top - container.getBoundingClientRect().top\r\n      if(top < 70){\r\n        setState(ref?.current?.textContent)\r\n      }\r\n    }\r\n    return [ref, getTop]\r\n}\r\n\r\nexport {useTabs}","import React, { useState, useRef, useEffect } from 'react'\r\nimport { useAppSelector } from '../../redux/hooks'\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport BurgerIngredientsCategory from '../BurgerIngredientsCategory/BurgerIngredientsCategory'\r\nimport { useTabs } from '../../services/myHooks/useTabs'\r\nimport { TObjectIngredient } from '../../types'\r\nimport s from './style.module.css'\r\n\r\n\r\n\r\nconst BurgerIngredients:React.FC = () => {\r\n\r\n  const ingredients = useAppSelector(store => store.INGREDIENTS.data)\r\n\r\n  const [current, setCurrent] = useState<string>('')\r\n  const sauces = ingredients.filter((item:TObjectIngredient) => item.type === 'sauce')\r\n  const mains = ingredients.filter((item:TObjectIngredient) => item.type === 'main')\r\n  const buns = ingredients.filter((item:TObjectIngredient) => item.type === 'bun')\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n    useEffect(() => {\r\n    setCurrent('Булки')\r\n    // eslint-disable-next-line\r\n    }, [])\r\n\r\n  const [bunsRef, getBuns] = useTabs(containerRef.current, setCurrent)\r\n  const [saucesRef, getSauces] = useTabs(containerRef.current, setCurrent)\r\n  const [mainsRef, getMains] = useTabs(containerRef.current, setCurrent)\r\n\r\n  const handleScroll:React.UIEventHandler<HTMLDivElement> = ():void => {\r\n    getBuns()\r\n    getSauces()\r\n    getMains()\r\n  }\r\n  \r\n  return (\r\n    <section className={`mr-5 ${s.item}`} data-cy=\"source\">\r\n      <div style={{ display: 'flex' }}>\r\n        <Tab value='Булки' active={current === 'Булки'} onClick={setCurrent}>\r\n          Булки\r\n        </Tab>\r\n        <Tab value='Соусы' active={current === 'Соусы'} onClick={setCurrent}>\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value='Начинки'\r\n          active={current === 'Начинки'}\r\n          onClick={setCurrent}>\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={`${s.categories} mt-5`}\r\n        onScroll={handleScroll}\r\n        ref={containerRef}>\r\n        {buns.length ? (\r\n          <BurgerIngredientsCategory\r\n            refCategory={bunsRef}\r\n            type='Булки'\r\n            items={buns}\r\n          />\r\n        ) : null}\r\n        {sauces.length ? (\r\n          <BurgerIngredientsCategory\r\n            refCategory={saucesRef}\r\n            type='Соусы'\r\n            items={sauces}\r\n          />\r\n        ) : null}\r\n        {mains.length ? (\r\n          <BurgerIngredientsCategory\r\n            refCategory={mainsRef}\r\n            type='Начинки'\r\n            items={mains}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\nexport default BurgerIngredients\r\n","import React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useAppDispatch } from '../../redux/hooks'\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { DropTargetMonitor, useDrag, useDrop } from 'react-dnd'\r\nimport { removeItem, sortArray } from '../../redux/constructor/constructorSlice'\r\nimport { TObjectIngredient } from '../../types'\r\nimport s from './style.module.css'\r\n\r\ninterface IBurgerConstructor {\r\n  index?: any\r\n  name: string\r\n  image: string\r\n  price: number\r\n  isLocked?: boolean\r\n  type?: 'top' | 'bottom'\r\n  ingredient?: TObjectIngredient\r\n}\r\n\r\nconst BurgerConstructorItem: React.FC<IBurgerConstructor> = ({\r\n  index,\r\n  name,\r\n  image,\r\n  price,\r\n  isLocked,\r\n  type,\r\n  ingredient\r\n}) => {\r\n  const ref = useRef<HTMLDivElement>(null)\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleClickDelete = (): void => {\r\n    dispatch(removeItem(index))\r\n  }\r\n\r\n  const [{ isDrag }, drag] = useDrag({\r\n    type: 'ingredientsItem',\r\n    item: { index, type: ingredient?.type },\r\n    collect(monitor) {\r\n      return {\r\n        isDrag: monitor.isDragging()\r\n      }\r\n    }\r\n  })\r\n\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: 'ingredientsItem',\r\n    collect(monitor: DropTargetMonitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId()\r\n      }\r\n    },\r\n    hover(item:{index: any, type: string}, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return\r\n      }\r\n\r\n      if (item.index === undefined) return\r\n      if (item.type === 'bun') return\r\n      const dragIndex = item?.index\r\n      const hoverIndex = index\r\n      if (dragIndex === hoverIndex) {\r\n        return\r\n      }\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n      const clientOffset = monitor.getClientOffset()\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n      \r\n      dispatch(\r\n        sortArray({ idTo: hoverIndex, idFrom: dragIndex })\r\n      )\r\n      item.index = hoverIndex\r\n    }\r\n  })\r\n\r\n  drag(drop(ref))\r\n  const opacity: number = isDrag ? 0 : 1\r\n  return (\r\n    <div\r\n      className={`${s.item}`}\r\n      ref={ref}\r\n      style={{ opacity: opacity }}\r\n      data-handler-id={handlerId}>\r\n      <div className={s.icon}>\r\n        {' '}\r\n        {type !== 'top' && type !== 'bottom' ? (\r\n          <DragIcon type='primary' />\r\n        ) : null}\r\n      </div>\r\n      <ConstructorElement\r\n        type={type}\r\n        isLocked={isLocked}\r\n        text={name}\r\n        thumbnail={image}\r\n        price={price}\r\n        handleClose={handleClickDelete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructorItem\r\n","import React from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\r\nimport {\r\n  Button,\r\n  CurrencyIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { DropTargetMonitor, useDrop } from 'react-dnd'\r\nimport cn from 'classnames'\r\nimport BurgerConstructorItem from '../BurgerConstructorItem/BurgerConstructorItem'\r\nimport { showOrderModal } from '../../redux/modal/modalSlice'\r\nimport {\r\n  pushItem,\r\n  setBun,\r\n  setBuns,\r\n  checkBunEmpty,\r\n} from '../../redux/constructor/constructorSlice'\r\nimport { getOrderNumber } from '../../redux/actions'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { TObjectIngredient, TObjectItemDnd } from '../../types'\r\nimport s from './style.module.css'\r\n\r\nconst BurgerConstructor: React.FC = () => {\r\n  const history = useHistory()\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation()\r\n  const { bun, dataConstructor, ingredients, isBunEmpty, user } =\r\n    useAppSelector(store => ({\r\n      bun: store.CONSTRUCTOR.bun,\r\n      dataConstructor: store.CONSTRUCTOR.data,\r\n      ingredients: store.INGREDIENTS.data,\r\n      isBunEmpty: store.CONSTRUCTOR.isBunEmpty,\r\n      user: store.AUTH?.user\r\n    }))\r\n  const onDropHandler = (itemId: any): void => {\r\n    const [item]: Array<TObjectIngredient> = ingredients.filter(\r\n      (item: TObjectIngredient): boolean => item._id === itemId.ingredient._id\r\n    )\r\n    if (item.type === 'bun') {\r\n      dispatch(setBun(item))\r\n      dispatch(setBuns(item))\r\n      dispatch(checkBunEmpty(false))\r\n    } else {\r\n      dispatch(pushItem(item))\r\n    }\r\n  }\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    drop(itemId: TObjectItemDnd) {\r\n      onDropHandler(itemId)\r\n    },\r\n    collect: (monitor: DropTargetMonitor) => ({\r\n      isHover: monitor.isOver()\r\n    })\r\n  })\r\n  const calcTotalCost = (): number => {\r\n    let accumulator: number = 0\r\n    if (!dataConstructor.length) {\r\n      return 0\r\n    }\r\n    accumulator = dataConstructor.reduce(\r\n      (acc: any, item: TObjectIngredient): any => {\r\n        if (item.type === 'bun') {\r\n          return +acc + +item.price * 2\r\n        }\r\n        return +acc + +item.price\r\n      },\r\n      [0]\r\n    )\r\n    return accumulator\r\n  }\r\n  const handleClickButton = (): void => {\r\n    if (!dataConstructor.length) return\r\n    if (!bun) {\r\n      dispatch(checkBunEmpty(true))\r\n      return\r\n    }\r\n    if (!user) {\r\n      history.push({ pathname: '/login', state: location })\r\n      return\r\n    }\r\n    dispatch(checkBunEmpty(false))\r\n    dispatch(getOrderNumber(dataConstructor))\r\n    dispatch(showOrderModal(true))\r\n  }\r\n\r\n  return (\r\n    <section\r\n      className={cn(s.section, { [s.active]: isHover })}\r\n      ref={dropTarget}\r\n      data-cy='dnd-target'>\r\n      {bun ? (\r\n        <BurgerConstructorItem\r\n          type='top'\r\n          isLocked={true}\r\n          name={bun.name}\r\n          image={bun.image_mobile}\r\n          price={bun.price}\r\n          ingredient={bun}\r\n        />\r\n      ) : null}\r\n      <div className={`${s.constructor} mb-1 mt-1`}>\r\n        {dataConstructor.map(\r\n          (item: TObjectIngredient, index: number): object | null => {\r\n            if (item.type !== 'bun') {\r\n              return (\r\n                <BurgerConstructorItem\r\n                  key={item.key}\r\n                  index={index}\r\n                  name={item.name}\r\n                  image={item.image_mobile}\r\n                  price={item.price}\r\n                  ingredient={item}\r\n                />\r\n              )\r\n            }\r\n            return null\r\n          }\r\n        )}\r\n      </div>\r\n      {bun ? (\r\n        <BurgerConstructorItem\r\n          type='bottom'\r\n          isLocked={true}\r\n          name={bun.name}\r\n          image={bun.image_mobile}\r\n          price={bun.price}\r\n          ingredient={bun}\r\n        />\r\n      ) : null}\r\n      <div className={`${s.total} mt-5`}>\r\n        <span className={`${s.price} text mr-5`}>\r\n          <output className='mr-1'>{calcTotalCost()}</output>\r\n          <CurrencyIcon type='primary' />\r\n        </span>\r\n        <Button type='primary' size='medium' onClick={handleClickButton}>\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n      {isBunEmpty && <div className={s.message}>Необходимо выбрать булку!</div>}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructor\r\n","import React from 'react'\r\nimport {DndProvider} from \"react-dnd\";\r\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\r\nimport BurgerIngredients from \"../components/BurgerIngredients/BurgerIngredients\";\r\nimport BurgerConstructor from \"../components/BurgerConstructor/BurgerConstructor\";\r\n\r\nconst Main:React.FC = () => {\r\n    return(\r\n        <>\r\n            <div className='container' style={{ padding: '0 16px' }}>\r\n                <h2 className=\"mb-2 mt-5 text text_type_main-large\">Соберите бургер</h2>\r\n            </div>\r\n            <div className='container flex__wrapper'>\r\n                <DndProvider backend = {HTML5Backend}>\r\n                    <BurgerIngredients />\r\n                    <BurgerConstructor />\r\n                </DndProvider>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default Main","import React from 'react'\r\nconst Page404: React.FC = () => {\r\n    return(\r\n        <div className=\"container\">\r\n            <h1>Ошибка 404. Страница не найдена!</h1>\r\n        </div>\r\n    )\r\n}\r\nexport default Page404","import React, { useState } from 'react'\r\nimport { useAppDispatch } from '../../redux/hooks'\r\nimport {\r\n  Input,\r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport {\r\n  loginUser,\r\n  registerUser,\r\n  resetPassword,\r\n  resetPasswordSearch\r\n} from '../../redux/actions'\r\nimport { NavLink, useHistory, useLocation } from 'react-router-dom'\r\nimport s from './style.module.css'\r\nimport { getCookie } from '../../services/cookie'\r\n\r\ninterface IPropsAuthForm {\r\n  headingText: string\r\n  type: string\r\n  buttonText: string\r\n  emailText?: string\r\n  passText?: string\r\n}\r\ninterface IStateValue {\r\n  email: string\r\n  password: string\r\n  name: string\r\n  token?: string\r\n}\r\n\r\nconst AuthForm: React.FC<IPropsAuthForm> = ({\r\n  headingText,\r\n  type,\r\n  buttonText,\r\n  emailText = 'E-mail',\r\n  passText = 'Пароль'\r\n}) => {\r\n  const history = useHistory<Array<{}>>()\r\n  const { state } = useLocation<Array<{}>>()\r\n  const dispatch = useAppDispatch()\r\n  const [value, setValue] = useState<IStateValue>({\r\n    email: '',\r\n    password: '',\r\n    name: ''\r\n  })\r\n\r\n  const onSubmitHandler: React.FormEventHandler<HTMLFormElement> = (\r\n    e: React.FormEvent<HTMLFormElement>\r\n  ): void => {\r\n    e.preventDefault()\r\n    if (type === 'login')\r\n      dispatch(loginUser({ email: value.email, password: value.password }))\r\n    if (type === 'register')\r\n      dispatch(\r\n        registerUser({\r\n          email: value.email,\r\n          password: value.password,\r\n          name: value.name\r\n        })\r\n      )\r\n    if (type === 'reset')\r\n      dispatch(\r\n        resetPassword({\r\n          password: value.password,\r\n          token: `Bearer ${getCookie('accessToken')}`\r\n        })\r\n      )\r\n    if (type === 'forgot') {\r\n      dispatch(resetPasswordSearch({ email: value.email }))\r\n      history.replace({ pathname: '/reset-password', state: [...state] })\r\n    }\r\n  }\r\n  const onChangeHandler: React.ChangeEventHandler<HTMLInputElement> = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    setValue(prev => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value\r\n    }))\r\n  }\r\n  const registerText = (): object => {\r\n    return (\r\n      <span className='text text_type_main-default'>\r\n        Уже зарегистрированы?{' '}\r\n        <NavLink className={s.link} to='/login'>\r\n          Войти\r\n        </NavLink>\r\n      </span>\r\n    )\r\n  }\r\n  const loginText = (): object => {\r\n    return (\r\n      <>\r\n        <span className='text text_type_main-default'>\r\n          Вы - новый пользователь?{' '}\r\n          <NavLink className={s.link} to='/register'>\r\n            Зарегистрироваться\r\n          </NavLink>\r\n        </span>\r\n        <span className='text text_type_main-default mt-3'>\r\n          Забыли пароль?{' '}\r\n          <NavLink className={s.link} to='/forgot-password' exact>\r\n            Восстановить\r\n          </NavLink>\r\n        </span>\r\n      </>\r\n    )\r\n  }\r\n  const forgotText = (): object => {\r\n    return (\r\n      <span className='text text_type_main-default'>\r\n        Вспомнили пароль?{' '}\r\n        <NavLink className={s.link} to='/login'>\r\n          Войти\r\n        </NavLink>\r\n      </span>\r\n    )\r\n  }\r\n  return (\r\n    <>\r\n      <div className={s.wrapper}>\r\n        <h2 className={'text text_type_main-medium'}>{headingText}</h2>\r\n        <form action='#' className={s.form} onSubmit={onSubmitHandler}>\r\n          {type === 'register' ? (\r\n            <div className='mt-3'>\r\n              <Input\r\n                type='text'\r\n                placeholder={'Имя'}\r\n                name='name'\r\n                onChange={onChangeHandler}\r\n                value={value.name || ''}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {type === 'reset' ? null : (\r\n            <div className='mt-3'>\r\n              <Input\r\n                type='email'\r\n                placeholder={emailText}\r\n                name='email'\r\n                onChange={onChangeHandler}\r\n                value={value.email || ''}\r\n              />\r\n            </div>\r\n          )}\r\n          {type === 'forgot' ? null : (\r\n            <div className='mt-3'>\r\n              <Input\r\n                type='password'\r\n                placeholder={passText}\r\n                icon='ShowIcon'\r\n                name='password'\r\n                onChange={onChangeHandler}\r\n                value={value.password || ''}\r\n              />\r\n            </div>\r\n          )}\r\n          {type === 'reset' ? (\r\n            <div className='mt-3'>\r\n              <Input\r\n                type='text'\r\n                placeholder='Введите текст из письма'\r\n                name='token'\r\n                onChange={onChangeHandler}\r\n                value={value.token || ''}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          <div className='mt-3'>\r\n            <Button type='primary'>{buttonText}</Button>\r\n          </div>\r\n        </form>\r\n        {type === 'register'\r\n          ? registerText()\r\n          : type === 'login'\r\n          ? loginText()\r\n          : type === 'forgot' || type === 'reset'\r\n          ? forgotText()\r\n          : null}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AuthForm\r\n","import React, { ReactElement } from 'react'\r\nimport AuthForm from '../components/AuthForm/AuthForm'\r\nimport Preloader from '../components/Preloader/Preloader'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useAppSelector } from '../redux/hooks'\r\n\r\nconst Register:React.FC = () => {\r\n  const { registerStatus, user, status } = useAppSelector(store => ({\r\n    registerStatus: store.AUTH.registerStatus,\r\n    status: store.AUTH.status,\r\n    user:store.AUTH.user\r\n  }))\r\n  const render = ():ReactElement => {\r\n    if (status === 'loading') return <Preloader />\r\n    if (registerStatus === 'success') return <Redirect to = \"/\" />\r\n    if(user) return <Redirect to = \"/\"/>\r\n    return (\r\n      <AuthForm\r\n        type='register'\r\n        headingText='Регистрация'\r\n        buttonText='Регистрация'\r\n      />\r\n    )\r\n  }\r\n  return render()\r\n}\r\nexport default Register\r\n","import React from 'react'\r\nimport { useAppSelector } from '../redux/hooks'\r\nimport AuthForm from '../components/AuthForm/AuthForm'\r\nimport { Redirect, useLocation } from 'react-router-dom'\r\nimport Preloader from '../components/Preloader/Preloader'\r\n\r\nconst Login:React.FC = () => {\r\n  const { user, status } = useAppSelector(store => ({\r\n    status: store.AUTH.status,\r\n    user:store.AUTH.user\r\n  }))\r\n  const location = useLocation<Location>()\r\n  \r\n  const render = () => {\r\n    if (status === 'loading') return <Preloader />\r\n    if (user) return <Redirect to = {{pathname:location?.state?.pathname} || '/'} />\r\n    return <AuthForm type='login' headingText='Вход' buttonText='Войти' />\r\n  }\r\n  return render()\r\n}\r\nexport default Login\r\n","import React, { useEffect } from 'react'\r\nimport AuthForm from '../components/AuthForm/AuthForm'\r\nimport Preloader from '../components/Preloader/Preloader'\r\nimport { useHistory, useRouteMatch, Redirect } from 'react-router-dom'\r\nimport { useAppSelector } from '../redux/hooks'\r\n\r\n\r\nconst ForgotPassword:React.FC = () => {\r\n  const { status, user } = useAppSelector(store => ({\r\n    status: store.AUTH.status,\r\n    user:store.AUTH.user\r\n  }))\r\n  const history = useHistory()\r\n  const {path} = useRouteMatch()\r\n  useEffect(() => {\r\n    history.replace({state:[{path}]})\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  \r\n  const render = () => {\r\n    if (status === 'loading')\r\n      return <Preloader />\r\n    if(user) return <Redirect to = \"/\" />\r\n    return (\r\n      <AuthForm\r\n        type='forgot'\r\n        headingText='Восстановление пароля'\r\n        buttonText='Восстановить'\r\n        emailText='Укажите e-mail'\r\n      />\r\n    )\r\n  }\r\n  return render()\r\n}\r\nexport default ForgotPassword\r\n","import React, { ReactElement } from 'react'\r\nimport { useAppSelector } from '../redux/hooks'\r\nimport Preloader from '../components/Preloader/Preloader'\r\nimport { useLocation, Redirect } from 'react-router-dom'\r\nimport AuthForm from '../components/AuthForm/AuthForm'\r\n\r\nconst ResetPassword = () => {\r\n  const { status } = useAppSelector(store => ({\r\n    status: store.AUTH.status\r\n  }))\r\n  const { state } = useLocation()\r\n  const render = (): ReactElement => {\r\n    if (status === 'loading') {\r\n      return <Preloader />\r\n    }\r\n    if (!state) {\r\n      return <Redirect to='/forgot-password' />\r\n    }\r\n    return (\r\n      <AuthForm\r\n        type='reset'\r\n        headingText='Восстановление пароля'\r\n        buttonText='Сохранить'\r\n        passText='Введите новый пароль'\r\n      />\r\n    )\r\n  }\r\n  return render()\r\n}\r\nexport default ResetPassword\r\n","import React from 'react'\r\nimport { useRouteMatch, Link, useLocation } from 'react-router-dom'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { TObjectIngredient } from '../../types'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsFeedItem {\r\n  id: number | string\r\n  status: string\r\n  ingredientsId: Array<string>\r\n  ingredients: Array<TObjectIngredient>\r\n  name: string\r\n  date?: string\r\n}\r\n\r\nconst FeedItem: React.FC<IPropsFeedItem> = ({\r\n  id,\r\n  status,\r\n  ingredientsId,\r\n  ingredients,\r\n  name,\r\n  date\r\n}) => {\r\n  const { path } = useRouteMatch()\r\n  const location = useLocation()\r\n\r\n  const ingredientsImages = ingredientsId.map(item => {\r\n    return ingredients.filter(ingredient => ingredient._id === item)[0].image\r\n  })\r\n\r\n  const calcTotal = (\r\n    ingredientsId: Array<string>,\r\n    ingredients: Array<TObjectIngredient>\r\n  ): number => {\r\n    const total =\r\n      ingredientsId &&\r\n      ingredientsId.reduce(\r\n        (acc: any, item) => {\r\n          if (\r\n            ingredients.filter(ingredient => ingredient._id === item)[0]\r\n              .type === 'bun'\r\n          )\r\n            return (\r\n              +acc +\r\n              ingredients.filter(ingredient => ingredient._id === item)[0]\r\n                .price *\r\n                2\r\n            )\r\n          return (\r\n            +acc +\r\n            +ingredients.filter(ingredient => ingredient._id === item)[0].price\r\n          )\r\n        },\r\n        [0]\r\n      )\r\n    return total\r\n  }\r\n  const nowDate: Date = new Date()\r\n  const dataString: string = `${nowDate.getFullYear()}-${\r\n    nowDate.getMonth() + 1 < 10\r\n      ? `0${nowDate.getMonth() + 1}`\r\n      : nowDate.getMonth() + 1\r\n  }-${nowDate.getDate() < 10 ? `0${nowDate.getDate()}` : nowDate.getDate()}`\r\n  const dateOrder: string | undefined = date?.slice(0, 10)\r\n  const timeOrder: string | undefined = date?.slice(11, 19)\r\n\r\n  const renderDate = (): string => {\r\n    if (dataString === dateOrder) return `Сегодня, ${timeOrder} i-GMT+3`\r\n    return `${dateOrder} ${timeOrder} i-GMT+3`\r\n  }\r\n\r\n  return (\r\n    <Link\r\n      to={{ pathname: `${path}/${id}`, state: { background: location } }}\r\n      className={`${s.wrapper} p-6 mt-4`}>\r\n      <div className={`${s.header} mb-6`}>\r\n        <span className='text text_type_digits-default'>#{id}</span>\r\n        <span className='text text_type_main-default text_color_inactive'>\r\n          {renderDate()}\r\n        </span>\r\n      </div>\r\n      <div className={`${s.body} mb-6`}>{name}</div>\r\n      {status === 'created' ? (\r\n        <span className={`${s.canceled} text text_type_main-small`}>\r\n          создан\r\n        </span>\r\n      ) : status === 'done' ? (\r\n        <span className={`${s.done} text text_type_main-small`}>Выполнен</span>\r\n      ) : status === 'pending' ? (\r\n        <span className={`${s.preparing} text text_type_main-small`}>\r\n          Готовится\r\n        </span>\r\n      ) : null}\r\n      <div className={`${s.footer} mt-6`}>\r\n        <div className={s.images}>\r\n          {ingredientsImages.map((item, id) => {\r\n            if (id < 5) {\r\n              return (\r\n                <div key={id} className={s.round}>\r\n                  {' '}\r\n                  <img src={item} alt=''></img>{' '}\r\n                </div>\r\n              )\r\n            }\r\n            return null\r\n          })}\r\n          {ingredientsImages.length > 5 ? (\r\n            <div className={s.round_more}>\r\n              <img src={ingredientsImages[5]} alt='' />\r\n              <span className='text text_type_digits-default'>\r\n                +{ingredientsImages.length - 5}\r\n              </span>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <span className={`${s.price} text text_type_digits-default`}>\r\n          {calcTotal(ingredientsId, ingredients)}\r\n          <CurrencyIcon type='primary' />\r\n        </span>\r\n      </div>\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default FeedItem\r\n","import React, { useEffect } from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\r\nimport { getIngredients } from '../../redux/actions'\r\nimport FeedItem from '../FeedItem/FeedItem'\r\nimport s from './style.module.css'\r\nimport { TObjectOrder } from '../../types'\r\n\r\nconst OrderList: React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  useEffect(() => {\r\n    dispatch(getIngredients())\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  const { data, dataIngredients } = useAppSelector(store => ({\r\n    data: store.SOCKETS.data,\r\n    dataIngredients: store.INGREDIENTS.data\r\n  }))\r\n  return (\r\n    <div className={`${s.list} pr-2 pl-2`}>\r\n      {data.length\r\n        ? data.map((item: TObjectOrder) => (\r\n            <FeedItem\r\n              key={item._id}\r\n              id={item.number}\r\n              ingredientsId={item.ingredients}\r\n              ingredients={dataIngredients}\r\n              name={item.name}\r\n              status={item.status}\r\n              date={item.createdAt}\r\n            />\r\n          ))\r\n        : null}\r\n    </div>\r\n  )\r\n}\r\nexport default OrderList\r\n","import React from 'react'\r\nimport { useAppSelector } from '../../redux/hooks'\r\nimport { TObjectOrder } from '../../types'\r\nimport OrderList from '../OrderList/OrderList'\r\nimport s from './style.module.css'\r\n\r\nconst OrderFeed: React.FC = () => {\r\n  const { total, totalToday, data } = useAppSelector(store => ({\r\n    total: store.SOCKETS.total,\r\n    totalToday: store.SOCKETS.totalToday,\r\n    data: store.SOCKETS.data\r\n  }))\r\n  return (\r\n    <div className={`container ${s.wrapper}`}>\r\n      <h2 className='mb-5 mt-5 text text_type_main-large'>Лента заказов</h2>\r\n      <div className={s.container}>\r\n        <OrderList />\r\n        <div className={s.statistic}>\r\n          <div className={`${s.header} mb-15`}>\r\n            <div className={`${s.done} mr-9`}>\r\n              <h3 className='text text_type_main-medium mb-6'>Готовы:</h3>\r\n              <ul className={s.list}>\r\n                {data.map((item: TObjectOrder) => {\r\n                  if (item.status === 'done')\r\n                    return (\r\n                      <li\r\n                        key={item._id}\r\n                        className='text text_type_digits-default mb-2'>\r\n                        {item.number}\r\n                      </li>\r\n                    )\r\n                  return null\r\n                })}\r\n              </ul>\r\n            </div>\r\n            <div className={`${s.inWork}`}>\r\n              <h3 className='text text_type_main-medium mb-6'>В работе:</h3>\r\n              <ul className={s.list}>\r\n                {data.map((item: TObjectOrder) => {\r\n                  if (item.status === 'pending')\r\n                    return (\r\n                      <li\r\n                        key={item._id}\r\n                        className='text text_type_digits-default mb-2'>\r\n                        {item.number}\r\n                      </li>\r\n                    )\r\n                  return null\r\n                })}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className={`mb-15`}>\r\n            <h3 className='text text_type_main-medium'>\r\n              Выполнено за всё время:\r\n            </h3>\r\n            <div className={`${s.allDone} text text_type_digits-large`}>\r\n              {total}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className='text text_type_main-medium'>\r\n              Выполнено за сегодня:\r\n            </h3>\r\n            <div className={`${s.allDay} text text_type_digits-large`}>\r\n              {totalToday}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default OrderFeed\r\n","import { TObjectOrder } from './../../types';\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { getOrderItem } from \"../actions\";\r\n\r\ninterface IinitialState{\r\n  data:Array<TObjectOrder>\r\n  wsStatus: boolean\r\n  total: number\r\n  totalToday: number\r\n  statusGetOrder: string\r\n  order: TObjectOrder | null\r\n  error?: any\r\n}\r\n\r\nconst initialState = {\r\n    data:[],\r\n    wsStatus:false,\r\n    total:0,\r\n    totalToday:0,\r\n    statusGetOrder:'',\r\n    order:null\r\n} as IinitialState\r\n\r\nconst wsSlice = createSlice({\r\n  name:'WS',\r\n  initialState,\r\n  reducers:{\r\n    wsConnectionStart(){},\r\n    wsConnectionSuccess(state){\r\n      state.wsStatus = true\r\n      state.error = null\r\n    },\r\n    wsConnectionFailed(state, {payload}){\r\n      state.wsStatus = false\r\n      state.error = payload\r\n    },\r\n    wsConnectionClosed(state, {payload}){\r\n      state.wsStatus = false\r\n      state.data = []\r\n      state.error = payload\r\n    },\r\n    wsGetMessage(state, {payload}){\r\n      state.data = [...payload.orders]\r\n      state.total = +payload.total\r\n      state.totalToday = +payload.totalToday\r\n    },\r\n    wsSendMessage(){},\r\n    wsCloseSocketConnection(state){\r\n      state.data = []\r\n      state.wsStatus = false\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(getOrderItem.pending, (state) => {\r\n      state.statusGetOrder = 'loading'\r\n    })\r\n    builder.addCase(getOrderItem.fulfilled, (state, action) => {\r\n      state.statusGetOrder = 'success'\r\n      state.order = action.payload.orders[0]\r\n    })\r\n  }\r\n})\r\n\r\n\r\nexport default wsSlice.reducer\r\n\r\nexport const {wsConnectionClosed, wsConnectionFailed, wsConnectionSuccess, wsGetMessage, wsConnectionStart, wsSendMessage, wsCloseSocketConnection} = wsSlice.actions","import React, {useEffect} from 'react'\r\nimport { useAppDispatch } from '../redux/hooks';\r\nimport OrderFeed from \"../components/OrderFeed/OrderFeed\";\r\nimport { wsCloseSocketConnection, wsConnectionStart } from '../redux/webSocket/wsSlice';\r\n\r\n\r\nconst Feed:React.FC = () => {\r\n    const urlAll: string = 'wss://norma.nomoreparties.space/orders/all'\r\n    const dispatch = useAppDispatch()\r\n    useEffect(() => {\r\n        // @ts-ignore: Unreachable code error\r\n        dispatch(wsConnectionStart(urlAll))\r\n        return () => {\r\n        dispatch(wsCloseSocketConnection())\r\n        }\r\n    // eslint-disable-next-line\r\n    }, [])\r\n    return <OrderFeed />\r\n}\r\nexport default Feed","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useAppDispatch } from '../../redux/hooks'\r\nimport { logoutUser } from '../../redux/actions'\r\nimport s from './style.module.css'\r\n\r\nconst ProfileNavBar: React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const clickHandler: React.MouseEventHandler = (): void => {\r\n    dispatch(logoutUser())\r\n  }\r\n  return (\r\n    <div className={`${s.navbar} mr-15`}>\r\n      <NavLink\r\n        exact\r\n        to={'/profile'}\r\n        className={s.link}\r\n        activeClassName={s.active}>\r\n        Профиль\r\n      </NavLink>\r\n      <NavLink\r\n        exact\r\n        to={'/profile/orders'}\r\n        className={s.link}\r\n        activeClassName={s.active}>\r\n        История заказов\r\n      </NavLink>\r\n      <NavLink to={'/login'} className={s.link} onClick={clickHandler}>\r\n        Выход\r\n      </NavLink>\r\n      <div className='text text_type_main-default text_color_inactive mt-20'>\r\n        В этом разделе вы можете изменить свои персональные данные\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfileNavBar\r\n","import React, { useState, useEffect, FormEventHandler, MouseEventHandler } from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\r\nimport {\r\n  Input,\r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { getUserData, setUserData } from '../../redux/actions'\r\nimport s from './style.module.css'\r\n\r\ninterface IFormState {\r\n  name?: string\r\n  email?: string\r\n  password?: string\r\n}\r\n\r\nconst ProfileForm: React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { name, email } = useAppSelector(store => ({\r\n    name: store.AUTH?.user!.user!.name,\r\n    email: store.AUTH?.user!.user!.email\r\n  }))\r\n\r\n  const [value, setValue] = useState<IFormState>({})\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserData())\r\n    setValue(prev => ({\r\n      ...prev,\r\n      name,\r\n      email\r\n    }))\r\n    // eslint-disable-next-line\r\n  }, [name])\r\n\r\n  const changeHandler: React.ChangeEventHandler = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    setValue(prev => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value\r\n    }))\r\n  }\r\n  const sumbitHandler:FormEventHandler = (e): void => {\r\n  e.preventDefault()\r\n  dispatch(setUserData({ name: value.name, email: value.email }))\r\n  }\r\n  const clickHandlerCancel:MouseEventHandler = (e): void => {\r\n    e.preventDefault()\r\n    setValue(prev => ({\r\n      ...prev,\r\n      name,\r\n      email\r\n    }))\r\n  }\r\n\r\n  return (\r\n    <form className='ml-15' onSubmit = {sumbitHandler}>\r\n      <div className={`${s.wrapper} mb-6`}>\r\n        <Input\r\n          value={value.name || ''}\r\n          onChange={changeHandler}\r\n          type='text'\r\n          name='name'\r\n          placeholder='Имя'\r\n          icon='EditIcon'\r\n        />\r\n      </div>\r\n      <div className={`${s.wrapper} mb-6`}>\r\n        <Input\r\n          value={value.email || ''}\r\n          onChange={changeHandler}\r\n          type='email'\r\n          name='email'\r\n          placeholder='Логин'\r\n          icon='EditIcon'\r\n        />\r\n      </div>\r\n      <div className={`${s.wrapper} mb-6`}>\r\n        <Input\r\n          value={value.password || ''}\r\n          onChange={changeHandler}\r\n          type='password'\r\n          name='password'\r\n          placeholder='Пароль'\r\n          icon='EditIcon'\r\n        />\r\n      </div>\r\n      <div className={`${s.wrapper} mb-6`}>\r\n          <button className = {s.button} type = \"button\" onClick = {clickHandlerCancel}>\r\n              Отменить\r\n          </button>\r\n          <Button>\r\n              Сохранить\r\n          </Button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\nexport default ProfileForm\r\n","import React from 'react'\r\nimport ProfileForm from \"../components/ProfileForm/ProfileForm\";\r\n\r\nconst ProfileInfo: React.FC = () => {\r\n    return <ProfileForm />\r\n}\r\n\r\nexport default ProfileInfo","import React from 'react'\r\nimport ProfileNavBar from '../components/ProfileNavBar/ProfileNavBar'\r\nimport ProfileInfo from './profile-info'\r\n\r\nconst Profile:React.FC = () => {\r\n\r\nreturn (\r\n    <div className=\"container pt-25 df\">\r\n        <ProfileNavBar />\r\n        <ProfileInfo />\r\n    </div>\r\n)\r\n\r\n}\r\nexport default Profile","import React, { useEffect } from 'react'\r\nimport { useAppDispatch } from '../redux/hooks';\r\nimport OrderList from \"../components/OrderList/OrderList\";\r\nimport ProfileNavBar from \"../components/ProfileNavBar/ProfileNavBar\";\r\nimport { wsConnectionClosed, wsConnectionStart } from '../redux/webSocket/wsSlice';\r\nimport { getCookie } from '../services/cookie';\r\n\r\nconst ProfileList:React.FC = () => {\r\n    const urlUser: string = `wss://norma.nomoreparties.space/orders?token=${getCookie('accessToken')}`\r\n    const dispatch = useAppDispatch()\r\n    useEffect(() => {\r\n        // @ts-ignore: Unreachable code error\r\n        dispatch(wsConnectionStart(urlUser))\r\n        return () => {\r\n            // @ts-ignore: Unreachable code error\r\n        dispatch(wsConnectionClosed())\r\n        }\r\n     // eslint-disable-next-line\r\n    }, [])\r\n    return  <div className=\"container pt-25 df\">\r\n        <ProfileNavBar />\r\n        <OrderList />\r\n    </div>\r\n}\r\nexport default ProfileList","import React, { ReactElement, useEffect } from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\r\nimport { useParams } from 'react-router'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { getOrderItem } from '../../redux/actions'\r\nimport { TObjectIngredient } from '../../types'\r\nimport Preloader from '../Preloader/Preloader'\r\nimport cn from 'classnames'\r\nimport s from './style.module.css'\r\n\r\ninterface IPropsOrderItem {\r\n  isModal?: boolean\r\n}\r\n\r\nconst OrderItemDetails: React.FC<IPropsOrderItem> = ({ isModal }) => {\r\n  const dispatch = useAppDispatch()\r\n  const { id } = useParams<{ id: string }>()\r\n  const { ingredients, status, order, getStatusIngredients } = useAppSelector(\r\n    store => ({\r\n      ingredients: store.INGREDIENTS.data,\r\n      status: store.SOCKETS.statusGetOrder,\r\n      getStatusIngredients: store.INGREDIENTS.status,\r\n      order: store.SOCKETS.order\r\n    })\r\n  )\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderItem(id))\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  const calcTotal = (\r\n    ingredientsId: Array<string>,\r\n    ingredients: Array<TObjectIngredient>\r\n  ): number => {\r\n    const total =\r\n      ingredientsId &&\r\n      ingredientsId.reduce(\r\n        (acc: any, item) => {\r\n          if (\r\n            ingredients.filter(ingredient => ingredient._id === item)[0]\r\n              .type === 'bun'\r\n          )\r\n            return (\r\n              +acc +\r\n              ingredients.filter(ingredient => ingredient._id === item)[0]\r\n                .price *\r\n                2\r\n            )\r\n          return (\r\n            +acc +\r\n            +ingredients.filter(ingredient => ingredient._id === item)[0].price\r\n          )\r\n        },\r\n        [0]\r\n      )\r\n    return total\r\n  }\r\n\r\n  const filterToIngredients = (\r\n    ingredients: Array<TObjectIngredient>,\r\n    id: string,\r\n    type: 'image' | 'name' | 'price'\r\n  ): string => {\r\n    const ingredient =\r\n      ingredients && ingredients.filter(item => item._id === id)[0][type]\r\n    return ingredient.toString()\r\n  }\r\n\r\n  const nowDate: Date = new Date()\r\n\r\n  const dataString: string = `${nowDate.getFullYear()}-${\r\n    nowDate.getMonth() + 1 < 10\r\n      ? `0${nowDate.getMonth() + 1}`\r\n      : nowDate.getMonth() + 1\r\n  }-${nowDate.getDate() < 10 ? `0${nowDate.getDate()}` : nowDate.getDate()}`\r\n  let dateOrder: string\r\n  let timeOrder: string\r\n  if(status === 'success'){\r\n    dateOrder = order!.createdAt?.slice(0, 10)\r\n    timeOrder = order!.createdAt?.slice(11, 19)\r\n  }\r\n  \r\n\r\n  const renderDate = (): string => {\r\n    if (dataString === dateOrder) return `Сегодня, ${timeOrder} i-GMT+3`\r\n    return `${dateOrder} ${timeOrder} i-GMT+3`\r\n  }\r\n  const render = (): ReactElement => {\r\n    if (status === 'loading' && getStatusIngredients === 'loading')\r\n      return <Preloader />\r\n    if (status === 'success' && getStatusIngredients === 'success' && order)\r\n      return (\r\n        <div className={cn(s.wrapper, {[s.nomodal]: !isModal})}>\r\n          <div className={s.info}>\r\n            <div className={`${s.header} text text_type_digits-default mb-10`}>\r\n              #{id}\r\n            </div>\r\n            <div className={`mb-10`}>\r\n              <h3 className={`text text_type_main-medium mb-3`}>\r\n                {\r\n                  order!.name\r\n                }\r\n              </h3>\r\n              <span className={`${s.status} mb-15`}>\r\n                {\r\n                  order!.status === 'created' ? (\r\n                    <span className={`${s.canceled} text text_type_main-small`}>\r\n                      создан\r\n                    </span>\r\n                  ) :\r\n                  order!.status === 'done' ? (\r\n                    <span className={`${s.done} text text_type_main-small`}>\r\n                      Выполнен\r\n                    </span>\r\n                  ) : \r\n                  order!.status === 'pending' ? (\r\n                    <span\r\n                      className={`${s.preparing} text text_type_main-small`}>\r\n                      Готовится\r\n                    </span>\r\n                  ) : null\r\n                }\r\n              </span>\r\n              <div className={`${s.structure}`}>\r\n                <h3 className='text text_type_main-medium mb-6'>Состав:</h3>\r\n                <ul className={`${s.list}`}>\r\n                  {\r\n                    order!.ingredients.map((item: string, id: number) => {\r\n                      return (\r\n                        <li className={`${s.item}`} key={id}>\r\n                          <div className={s.img}>\r\n                            <img\r\n                              src={filterToIngredients(\r\n                                ingredients,\r\n                                item,\r\n                                'image'\r\n                              )}\r\n                              alt=''\r\n                            />\r\n                          </div>\r\n                          <span>\r\n                            {filterToIngredients(ingredients, item, 'name')}\r\n                          </span>\r\n                          <span className={s.price}>\r\n                            {' '}\r\n                            1 x{' '}\r\n                            {filterToIngredients(\r\n                              ingredients,\r\n                              item,\r\n                              'price'\r\n                            )}{' '}\r\n                            <CurrencyIcon type='primary' />{' '}\r\n                          </span>\r\n                        </li>\r\n                      )\r\n                    })\r\n                  }\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div className={`${s.footer}`}>\r\n              <span className='text text_type_main-default text_color_inactive'>\r\n                {renderDate()}\r\n              </span>\r\n              <span className={`${s.total}`}>\r\n                {calcTotal(\r\n                  order!.ingredients,\r\n                  ingredients\r\n                )}{' '}\r\n                <CurrencyIcon type={'primary'} />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    return <Preloader />\r\n  }\r\n  return render()\r\n}\r\n\r\nexport default OrderItemDetails\r\n","import React from 'react'\r\nimport { Switch , Route, useLocation, useHistory } from 'react-router-dom'\r\nimport ProtectRoute from '../ProtectRoute/ProtectRoute'\r\nimport IngredientsDetails from '../IngredientsDetails/IngredientsDetails'\r\nimport Main from '../../pages/main'\r\nimport Page404 from '../../pages/404'\r\nimport Register from '../../pages/register'\r\nimport Login from '../../pages/login'\r\nimport ForgotPassword from '../../pages/forgot-password'\r\nimport ResetPassword from '../../pages/reset-password'\r\nimport Feed from '../../pages/feed'\r\nimport Profile from '../../pages/profile'\r\nimport ProfileList from '../../pages/profile-list'\r\nimport OrderItemDetails from '../OrderItemDetails/OrderItemDetails'\r\nimport Modal from '../Modal/Modal'\r\nimport { useAppDispatch } from '../../redux/hooks'\r\nimport { cleanIngredients } from '../../redux/ingredients/ingredientsSlice'\r\n\r\n\r\nconst Routers:React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  // @ts-ignore: Unreachable code error \r\n  const bg = (history.action === \"PUSH\" || history.action === \"REFRESH\") && location?.state?.background\r\n  const closeModalIngredientsDetails = () => {\r\n    dispatch(cleanIngredients())\r\n  }\r\n  return (\r\n    <>\r\n      <Switch location = {bg || location}>\r\n        <Route exact path='/'  children = { <Main />} />\r\n        <Route path='/ingredients/:id' children = {<IngredientsDetails />} />\r\n        <Route exact path='/feed' children = { <Feed />} />\r\n        <Route path='/feed/:id' children = { <OrderItemDetails />} />\r\n        <Route path='/register' children = {<Register />} />\r\n        <Route exact path='/login' children = { <Login />} />\r\n        <Route path='/forgot-password' children = {<ForgotPassword />} />\r\n        <Route path='/reset-password' children = {<ResetPassword />} />\r\n        <ProtectRoute exact path='/profile' children = {<Profile />} />\r\n        <ProtectRoute exact path='/profile/orders' children = { <ProfileList />} />\r\n        <ProtectRoute exact path='/profile/orders/:id' children = {<OrderItemDetails />} />\r\n        <Route path='*' children = {<Page404 />} />\r\n      </Switch>\r\n        {bg && <Route path='/ingredients/:id' children = {<Modal closedFunction = {closeModalIngredientsDetails} children = {<IngredientsDetails isModal = {true} />}/>}/>}\r\n        {bg && <Route path='/feed/:id' children = {<Modal children = {<OrderItemDetails isModal = {true} />}/>} />}\r\n        {bg && <Route path='/profile/orders/:id' children = {<Modal children = {<OrderItemDetails isModal = {true} />}/>} />}\r\n    </>\r\n  )\r\n}\r\nexport default Routers\r\n","import React, { useEffect } from 'react'\r\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport AppHeader from '../AppHeader/AppHeader'\r\nimport OrderDetails from '../OrderDetails/OrderDetails'\r\nimport { getUserData, refreshToken, getIngredients } from '../../redux/actions'\r\nimport Routers from '../Routers/Routers'\r\nimport './app.css'\r\n\r\nconst App: React.FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { isShowOrder, refreshStatus } = useAppSelector(store => ({\r\n    isShowOrder: store.MODAL.isShowOrder,\r\n    refreshStatus: store.AUTH.refreshStatus\r\n  }))\r\n  useEffect(() => {\r\n    if (localStorage.getItem('refreshToken')) dispatch(refreshToken())\r\n    dispatch(getIngredients())\r\n    // eslint-disable-next-line\r\n  }, [])\r\n  useEffect(() => {\r\n    if (localStorage.getItem('refreshToken')) dispatch(getUserData())\r\n    // eslint-disable-next-line\r\n  }, [refreshStatus])\r\n\r\n  return (\r\n    <>\r\n      {isShowOrder && <OrderDetails />}\r\n      <main className='main'>\r\n        <Router>\r\n          <AppHeader />\r\n          <Routers />\r\n        </Router>\r\n      </main>\r\n    </>\r\n  )\r\n}\r\nexport default App\r\n","import {createSlice} from \"@reduxjs/toolkit\";\r\nimport {resetPasswordSearch, resetPassword, registerUser, loginUser, refreshToken, setUserData, getUserData, logoutUser } from \"../actions\";\r\n\r\n\r\nexport interface IInitialState{\r\n    status: string\r\n    user: {\r\n        user:{\r\n            name: string\r\n            email: string\r\n        }\r\n    } | null\r\n    refreshStatus: string\r\n    registerStatus: string\r\n    resetPasswordStatus: string\r\n    stateHistory: string\r\n}\r\nconst initialState = {\r\n        status:'',\r\n        user: null,\r\n        refreshStatus:'',\r\n    \r\n        registerStatus:'',\r\n        resetPasswordStatus:'',\r\n        stateHistory:'',\r\n} as IInitialState\r\n\r\nconst authSlice = createSlice({\r\n    name:'AUTH',\r\n    initialState,\r\n    reducers:{},\r\n    extraReducers:(builder) => {\r\n        builder.addCase(resetPasswordSearch.fulfilled, (state) => {\r\n            state.resetPasswordStatus = 'success'\r\n        })\r\n        builder.addCase(resetPassword.fulfilled, (state) => {\r\n            state.resetPasswordStatus = 'success'\r\n        })\r\n        builder.addCase(registerUser.pending, (state) => {\r\n            state.registerStatus = 'loading'\r\n        })\r\n        builder.addCase(registerUser.fulfilled, (state) => {\r\n            state.registerStatus = 'success'\r\n        })\r\n        builder.addCase(registerUser.rejected, (state) => {\r\n            state.registerStatus = 'failed'\r\n        })\r\n        builder.addCase(loginUser.pending, (state) => {\r\n            state.status = 'loading'\r\n        })\r\n        builder.addCase(loginUser.fulfilled, (state, action) => {\r\n            state.status = 'success'\r\n            state.user = action.payload\r\n        })\r\n        builder.addCase(loginUser.rejected, (state) => {\r\n            state.status = 'failed'\r\n        })\r\n        builder.addCase(setUserData.pending, (state) => {\r\n            state.status = 'loading'\r\n        })\r\n        builder.addCase(setUserData.fulfilled, (state, action) => {\r\n            state.status = 'success'\r\n            state.user = action.payload\r\n        })\r\n        builder.addCase(setUserData.rejected, (state) => {\r\n            state.status = 'failed'\r\n        })\r\n        builder.addCase(getUserData.pending, (state) => {\r\n            state.status = 'loading'\r\n        })\r\n        builder.addCase(getUserData.fulfilled, (state, action) => {\r\n            state.user = action.payload\r\n            state.status = 'success'\r\n        })\r\n        builder.addCase(getUserData.rejected, (state) => {\r\n            state.status = 'failed'\r\n        })\r\n        builder.addCase(refreshToken.fulfilled, (state) => {\r\n            state.refreshStatus = 'success'\r\n        })\r\n        builder.addCase(logoutUser.pending, (state) => {\r\n            state.user = null\r\n            state.status = ''\r\n        })\r\n        \r\n    }\r\n})\r\n\r\nexport default authSlice.reducer","import { configureStore } from \"@reduxjs/toolkit\"\r\nimport logger from 'redux-logger'\r\nimport { wsMiddleware } from \"./middlewares/wsMiddleware\"\r\nimport constructorSlice from \"./constructor/constructorSlice\"\r\nimport ingredientsSlice from \"./ingredients/ingredientsSlice\"\r\nimport modalSlice from \"./modal/modalSlice\"\r\nimport authSlice from \"./auth/authSlice\"\r\nimport wsSlice from \"./webSocket/wsSlice\"\r\n\r\n\r\nconst store = configureStore({\r\n  reducer:{\r\n    INGREDIENTS:ingredientsSlice,\r\n    CONSTRUCTOR:constructorSlice,\r\n    MODAL:modalSlice,\r\n    AUTH:authSlice,\r\n    SOCKETS:wsSlice,\r\n  },\r\n  middleware:getDefaultMiddleware => getDefaultMiddleware().concat(logger, wsMiddleware()),\r\n  devTools: process.env.NODE_ENV !== 'production',\r\n})\r\n\r\nexport default store\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch","import { Middleware, MiddlewareAPI } from \"redux\"\r\nimport { wsConnectionClosed, wsConnectionStart, wsConnectionSuccess, wsGetMessage, wsConnectionFailed, wsSendMessage, wsCloseSocketConnection } from \"../webSocket/wsSlice\"\r\n\r\nexport const wsMiddleware = (): Middleware => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null\r\n    return next => action => {\r\n      const {dispatch} = store\r\n      const {type, payload} = action\r\n      if(type === wsConnectionStart.type){\r\n        socket = new WebSocket(payload)\r\n      }\r\n        if(socket){\r\n          socket.onopen = (e) => {\r\n            dispatch(wsConnectionSuccess())\r\n          }\r\n          socket.onerror = (e) => {\r\n            dispatch(wsConnectionFailed(e))\r\n          }\r\n          socket.onmessage = (e) => {\r\n            const { data } = e\r\n            dispatch(wsGetMessage(JSON.parse(data)))\r\n          }\r\n          socket.onclose = (e) => {\r\n            const error = e.code\r\n            dispatch(wsConnectionClosed(error))\r\n          }\r\n          if(type === wsSendMessage.type){\r\n            const message = payload\r\n            socket.send(JSON.stringify(message))\r\n          }\r\n          if(type === wsCloseSocketConnection.type){\r\n            socket.close()\r\n          }\r\n        }\r\n        next(action)\r\n      }\r\n    }\r\n  }\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './components/App/App'\r\nimport { Provider } from 'react-redux'\r\nimport store from './redux/store'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__pZldf\",\"header\":\"style_header__2J_50\",\"body\":\"style_body__35MhS\",\"footer\":\"style_footer__rte1v\",\"images\":\"style_images__1Iu6y\",\"round\":\"style_round__1Pj__\",\"round_more\":\"style_round_more__tMCxl\",\"price\":\"style_price__2lXOn\",\"canceled\":\"style_canceled__3CoyR\",\"done\":\"style_done__zUKlQ\",\"preparing\":\"style_preparing__oZn0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__zjUkX\",\"container\":\"style_container__2sAr9\",\"statistic\":\"style_statistic__2Kat_\",\"header\":\"style_header__1HrCx\",\"done\":\"style_done__3pzuP\",\"list\":\"style_list__1zGRv\",\"inWork\":\"style_inWork__3SGsp\",\"allDone\":\"style_allDone__XmTV_\",\"allDay\":\"style_allDay__1BZcR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__194QW\",\"title\":\"style_title__wYbpc\",\"image\":\"style_image__3b2pX\",\"bottom\":\"style_bottom__cyRXZ\",\"dark\":\"style_dark__XCOuZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"style_section__3ZM0C\",\"constructor\":\"style_constructor__3tzgL\",\"active\":\"style_active__3Gv1h\",\"total\":\"style_total__2wH-k\",\"price\":\"style_price__sdYm7\",\"message\":\"style_message__1aoB0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__1AtLL\",\"form\":\"style_form__1N5gI\",\"link\":\"style_link__lB4S2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"style_navbar__smDuw\",\"link\":\"style_link__3_Ucy\",\"active\":\"style_active__GGax9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__3B_s-\",\"button\":\"style_button__2c15i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"style_item__2aQ6N\",\"img\":\"style_img__1gxBo\",\"price\":\"style_price__bZnQM\",\"active\":\"style_active__2MrUt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"style_modal__1RGQB\",\"header\":\"style_header__1FXqj\",\"close\":\"style_close__3GZu3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"style_item__3MSZp\",\"categories\":\"style_categories__P8HNB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"style_item__rGo0t\",\"icon\":\"style_icon__3eRNc\"};"],"sourceRoot":""}