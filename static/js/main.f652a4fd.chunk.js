(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={overlay:"style_overlay__3J7R6"}},101:function(e,t,n){e.exports={loader:"style_loader__LVQLP",spin:"style_spin__3dEiT"}},103:function(e,t,n){e.exports={list:"style_list__1gkw8"}},104:function(e,t,n){e.exports={list:"style_list__QNExm"}},14:function(e,t,n){e.exports={wrapper:"style_wrapper__3TzVS",info:"style_info__c7ZWw",header:"style_header__2PH4M",status:"style_status__1OCLz",structure:"style_structure__2igHX",list:"style_list__13F-L",item:"style_item__25r23",img:"style_img__LpNFH",price:"style_price__3pUYU",footer:"style_footer__32R2F",total:"style_total__2QHBt",canceled:"style_canceled__2WABG",done:"style_done__uGrCv",preparing:"style_preparing__jIc7d",nomodal:"style_nomodal__19yge"}},15:function(e,t,n){e.exports={wrapper:"style_wrapper__1nxMU",image:"style_image__CkfkN",descr:"style_descr__1yPck",food:"style_food__pqgVN",item:"style_item__1fC_y",number:"style_number__3kQOq",nomodal:"style_nomodal__3kLlT"}},18:function(e,t,n){e.exports={header:"style_header__31Mxe",wrapper:"style_wrapper__2OT7Z",link:"style_link__2gkr7",active:"style_active__1C6p8",menu:"style_menu__2xx7D",list:"style_list__2HVf7",profile:"style_profile__35sOJ",dark:"style_dark__3CaJp"}},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(37),c=n.n(s),i=n(47),o=function(){return Object(i.b)()},l=i.c,u=n(5),d=n(4),j=n(10),p=n(18),m=n.n(p),b=n(0),f=function(){var e=Object(j.j)("/"),t=Object(j.j)("/feed"),n=Object(j.j)("/feed/:id"),a=Object(j.j)("/profile"),r=Object(j.j)("/profile/orders"),s=Object(j.j)("/profile/orders/:id");return Object(b.jsx)("header",{className:"".concat(m.a.header," pt-2 pb-2"),children:Object(b.jsxs)("div",{className:"container ".concat(m.a.wrapper),children:[Object(b.jsx)("nav",{className:m.a.menu,children:Object(b.jsxs)("ul",{className:m.a.list,children:[Object(b.jsx)("li",{className:"mr-1",children:Object(b.jsxs)(u.c,{exact:!0,to:{pathname:"/"},className:"".concat(m.a.link," text text_type_main-default"),activeClassName:m.a.active,children:[Object(b.jsx)(d.BurgerIcon,{type:e&&(null===e||void 0===e?void 0:e.isExact)?"primary":"secondary"}),Object(b.jsx)("span",{className:"ml-1",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)(u.c,{to:{pathname:"/feed"},className:"".concat(m.a.link," text text_type_main-default"),activeClassName:m.a.active,children:[Object(b.jsx)(d.ListIcon,{type:t&&(null===t||void 0===t?void 0:t.isExact)||t&&(null===n||void 0===n?void 0:n.isExact)?"primary":"secondary"}),Object(b.jsx)("span",{className:"".concat(m.a.dark," ml-1"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(b.jsx)(u.b,{to:"/",children:Object(b.jsx)(d.Logo,{})}),Object(b.jsxs)(u.c,{to:{pathname:"/profile"},className:"".concat(m.a.link," ").concat(m.a.profile," text text_type_main-default"),activeClassName:m.a.active,children:[Object(b.jsx)(d.ProfileIcon,{type:a&&(null===a||void 0===a?void 0:a.isExact)||a&&(null===r||void 0===r?void 0:r.isExact)||a&&(null===s||void 0===s?void 0:s.isExact)?"primary":"secondary"}),Object(b.jsx)("span",{className:"".concat(m.a.dark," ml-1"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},h=n(51),x=n(52),O=n(108),_=n(107),v=n(100),y=n.n(v),g=function(e){var t=e.children,n=e.closedFunction,r=Object(j.g)();Object(a.useEffect)((function(){return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}),[]);var s=function(e){"Escape"===e.key&&(n&&n(),r&&r.goBack())};return Object(b.jsx)("div",{onClick:function(e){(e.target.classList.contains("overlay__closed")||e.target.classList.contains("closed"))&&(n&&n(),r&&r.goBack())},className:"".concat(y.a.overlay," overlay__closed"),children:t})},w=n(58),N=n.n(w),k=function(e){Object(O.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).$el=void 0,a.$el=document.getElementById("app-modals"),a}return Object(x.a)(n,[{key:"render",value:function(){return Object(s.createPortal)(Object(b.jsx)(g,{closedFunction:this.props.closedFunction,children:Object(b.jsxs)("div",{className:"".concat(N.a.modal," pt-5 pl-5 pr-5"),children:[Object(b.jsxs)("div",{className:N.a.header,children:[Object(b.jsx)("span",{className:"text text_type_main-large",children:this.props.title}),Object(b.jsx)("span",{className:"".concat(N.a.close," closed"),"data-cy":"close",children:Object(b.jsx)(d.CloseIcon,{type:"primary"})})]}),this.props.children]})}),this.$el)}}]),n}(a.Component),T=n.p+"static/media/success.887b83be.gif",C=n(31),S=n.n(C),I=n(9),E=n(3),U=n.n(E),R=n(8),D=n(12),A=function(e,t,n){n=n||{};var a=(n=Object(D.a)({path:"/"},n)).expires;if("number"==typeof a&&a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r.toUTCString()}a&&(n.expires=a);var s=e+"="+(t=encodeURIComponent(t));for(var c in n){s+="; "+c;var i=n[c];!0!==i&&(s+="="+i)}document.cookie=s},B=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},P=function(e){return"https://norma.nomoreparties.space/api/".concat(e)},H=new(function(){function e(){Object(h.a)(this,e),this.apiUrlIngredients=void 0,this.apiUrlOrders=void 0,this.apiRegisterUser=void 0,this.apiLoginUser=void 0,this.apiLogoutUser=void 0,this.apiRefreshToken=void 0,this.apiResetPassSearch=void 0,this.apiResetPass=void 0,this.apiGetUserData=void 0,this.apiUrlIngredients=P("ingredients"),this.apiUrlOrders=P("orders"),this.apiRegisterUser=P("auth/register"),this.apiLoginUser=P("auth/login"),this.apiLogoutUser=P("auth/logout"),this.apiRefreshToken=P("auth/token"),this.apiResetPassSearch=P("password-reset"),this.apiResetPass=P("password-reset/reset"),this.apiGetUserData=P("auth/user")}return Object(x.a)(e,[{key:"checkResponse",value:function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}},{key:"fetchRefreshData",value:function(){var e=Object(R.a)(U.a.mark((function e(t,n){var a,r,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,this.checkResponse(a);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=26;break}return e.next=14,this.refreshToken();case 14:return r=e.sent,localStorage.setItem("refreshToken",r.refreshToken),A("accessToken",r.accessToken.split("Bearer ")[1]),n.headers.Autorization="Bearer ".concat(r.refreshToken),e.next=20,fetch(t,n);case 20:return s=e.sent,e.next=23,this.checkResponse(s);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",Promise.reject());case 27:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDataFromDataBase",value:function(){var e=Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiUrlIngredients);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getOrderedNumber",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n,a,r,s;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.map((function(e){return e._id})),a=t.find((function(e){return"bun"===e.type})),e.prev=2,0!==t.length){e.next=5;break}throw new Error("\u041f\u0443\u0441\u0442\u043e\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f!!!");case 5:if(void 0!==a){e.next=7;break}throw new Error("\u0411\u0435\u0437 \u0431\u0443\u043b\u043a\u0438 \u043d\u0435\u043b\u044c\u0437\u044f!!!");case 7:return r={ingredients:n},e.next=10,fetch(this.apiUrlOrders,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B("accessToken"))},body:JSON.stringify(r)});case 10:if((s=e.sent).ok){e.next=13;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 13:return e.next=15,s.json();case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e.catch(2),new Error(e.t0);case 21:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerUser",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiRegisterUser,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiLoginUser,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiRefreshToken,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"resetPasswordSearch",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiResetPassSearch,{method:"POST",body:JSON.stringify(t)});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiResetPass,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=Object(R.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRefreshData(this.apiGetUserData,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B("accessToken"))}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserData",value:function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRefreshData(this.apiGetUserData,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B("accessToken"))},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logoutUser",value:function(){var e=Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.apiLogoutUser,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getOrderItem",value:function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.apiUrlOrders,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u041e\u041a");case 6:return e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),M=Object(I.b)("INGREDIENTS/getIngredients",Object(R.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getDataFromDataBase();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),G=Object(I.b)("MODAL/getOrderNumber",function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getOrderedNumber(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(I.b)("AUTH/resetPasswordSearch",function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.resetPasswordSearch(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(I.b)("AUTH/resetPassword",function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.resetPassword(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(I.b)("AUTH/loginUser",function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.loginUser(t);case 2:return n=e.sent,A("accessToken",null===n||void 0===n?void 0:n.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",null===n||void 0===n?void 0:n.refreshToken),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(I.b)("AUTH/refreshToken",Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.refreshToken();case 2:return t=e.sent,A("accessToken",null===t||void 0===t?void 0:t.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",null===t||void 0===t?void 0:t.refreshToken),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))),Z=Object(I.b)("AUTH/registerUser",function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.registerUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=Object(I.b)("AUTH/getUserData",Object(R.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getUserData();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Q=Object(I.b)("AUTH/setUserData",function(){var e=Object(R.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.setUserData(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(I.b)("AUTH/logoutUser",Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.logoutUser();case 2:return t=e.sent,A("accessToken",""),localStorage.setItem("refreshToken",""),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))),X=Object(I.b)("WS/getOrderItem",function(){var e=Object(R.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getOrderItem(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=Object(I.c)({name:"MODAL",initialState:{isShowOrder:!1,status:"",order:0},reducers:{showOrderModal:function(e,t){var n=t.payload;e.isShowOrder=n},removeOrder:function(e){e.order=0}},extraReducers:function(e){e.addCase(G.pending,(function(e){e.status="loading"})),e.addCase(G.fulfilled,(function(e,t){var n,a;e.order=null===(n=t.payload)||void 0===n||null===(a=n.order)||void 0===a?void 0:a.number,e.status="success"})),e.addCase(G.rejected,(function(e){e.status="failed"}))}}),Y=V.reducer,$=V.actions,q=$.showOrderModal,ee=$.removeOrder,te=n(101),ne=n.n(te),ae=function(){return Object(b.jsx)("div",{className:ne.a.loader})},re=Object(I.c)({name:"CONSTRUCTOR",initialState:{data:[],bun:null,isBunEmpty:!1},reducers:{pushItem:function(e,t){e.data.push(Object(D.a)(Object(D.a)({},t.payload),{},{key:Date.now()}))},setBuns:function(e,t){-1!==e.data.findIndex((function(e){return"bun"===e.type}))?e.data.splice(e.data.findIndex((function(e){return"bun"===e.type})),1,t.payload):e.data.push(t.payload)},setBun:function(e,t){e.bun=t.payload},sortArray:function(e,t){var n=t.payload,a=n.idFrom,r=n.idTo;e.data.splice(r,0,e.data.splice(a,1)[0])},removeItem:function(e,t){e.data.splice(t.payload,1)},checkBunEmpty:function(e,t){e.isBunEmpty=t.payload},cleanConstructor:function(e){e.data=[],e.bun=null}}}),se=re.reducer,ce=re.actions,ie=ce.pushItem,oe=ce.setBuns,le=ce.setBun,ue=ce.sortArray,de=ce.removeItem,je=ce.checkBunEmpty,pe=ce.cleanConstructor,me=function(){var e=o(),t=l((function(e){return e.MODAL.order})),n=l((function(e){return e.MODAL.status}));return Object(b.jsx)(k,{closedFunction:function(){e(pe()),e(ee()),e(q(!1))},children:"loading"===n?Object(b.jsx)(ae,{}):"success"===n?Object(b.jsxs)("div",{className:S.a.wrapper,children:[Object(b.jsxs)("h2",{className:"".concat(S.a.title," mt-2"),children:[" ",t]}),Object(b.jsx)("span",{className:"".concat(S.a.subtitle," text text_type_main-medium mt-4"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("div",{className:"".concat(S.a.image),children:Object(b.jsx)("img",{src:T,alt:"success"})}),Object(b.jsxs)("div",{className:"".concat(S.a.bottom),children:[Object(b.jsx)("span",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("span",{className:"".concat(S.a.dark," text text_type_main-default mt-1"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]}):"failed"===n?Object(b.jsx)("h2",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"}):Object(b.jsx)(ae,{})})},be=n(109),fe=["children"],he=function(e){var t=e.children,n=Object(be.a)(e,fe),a=Object(j.h)();return Object(b.jsx)(j.b,Object(D.a)(Object(D.a)({},n),{},{render:function(){return localStorage.getItem("refreshToken")?t:Object(b.jsx)(j.a,{to:{pathname:"/login",state:a}})}}))},xe=n(16),Oe=n(29),_e=n.n(Oe),ve=n(15),ye=n.n(ve),ge=Object(I.c)({name:"INGREDIENTS",initialState:{data:[],status:"",ingredient:null},reducers:{getIngredient:function(e,t){e.ingredient=e.data.filter((function(e){return e._id===t.payload}))[0]},cleanIngredients:function(e){e.ingredient=null}},extraReducers:function(e){e.addCase(M.pending,(function(e){e.status="loading"})),e.addCase(M.fulfilled,(function(e,t){e.data=t.payload.data,e.status="success"})),e.addCase(M.rejected,(function(e){e.status="failed"}))}}),we=ge.reducer,Ne=ge.actions,ke=Ne.getIngredient,Te=Ne.cleanIngredients,Ce=function(e){var t=e.isModal,n=Object(j.i)().id,r=o(),s=l((function(e){return{item:e.INGREDIENTS.ingredient,status:e.INGREDIENTS.status}})),c=s.item,i=s.status;Object(a.useEffect)((function(){r(ke(n))}),[i]);return"loading"===i?Object(b.jsx)(ae,{}):"success"===i&&c?Object(b.jsxs)("div",{className:_e()(ye.a.wrapper,Object(xe.a)({},ye.a.nomodal,!t)),children:[Object(b.jsx)("div",{className:ye.a.image,children:Object(b.jsx)("img",{src:c.image_large,alt:c.name})}),Object(b.jsx)("h3",{className:"".concat(ye.a.name," text text_type_main-medium"),children:c.name}),Object(b.jsx)("p",{className:"".concat(ye.a.descr," mt-4 text text_type_main-default"),children:"API \u043d\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(b.jsxs)("div",{className:"".concat(ye.a.food," text text_type_main-default"),children:[Object(b.jsxs)("div",{className:ye.a.item,children:[Object(b.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("span",{className:"".concat(ye.a.number," text text_type_digits-default mt-1"),children:c.calories})]}),Object(b.jsxs)("div",{className:ye.a.item,children:[Object(b.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("span",{className:"".concat(ye.a.number," text text_type_digits-default mt-1"),children:c.proteins})]}),Object(b.jsxs)("div",{className:ye.a.item,children:[Object(b.jsx)("span",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("span",{className:"".concat(ye.a.number," text text_type_digits-default mt-1"),children:c.fat})]}),Object(b.jsxs)("div",{className:ye.a.item,children:[Object(b.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("span",{className:"".concat(ye.a.number," text text_type_digits-default mt-1"),children:c.carbohydrates})]})]})]}):null},Se=n(195),Ie=n(106),Ee=n(11),Ue=n(196),Re=n(48),De=n.n(Re),Ae=function(e){var t=e.srcImage,n=e.price,r=e.name,s=e.ingredient,c=e.id,i=Object(j.h)(),o=Object(j.g)(),u=l((function(e){return e.CONSTRUCTOR.data})),p=Object(a.useState)(null),m=Object(Ee.a)(p,2),f=m[0],h=m[1],x=Object(Ue.a)({type:"ingredient",item:{id:c,ingredient:s},collect:function(e){return{isDrag:e.isDragging(),ingredientItem:e.getItem()}},end:function(e){y(e)}}),O=Object(Ee.a)(x,2),_=O[0].isDrag,v=O[1];Object(a.useEffect)((function(){h(u.filter((function(e){return e._id===s._id})).length)}),[u]);var y=function(e){h(u.filter((function(t){return t._id===e.id})).length)};return Object(b.jsxs)("li",{onClick:function(){o.push({pathname:"/ingredients/".concat(c),state:{background:i}})},className:_e()(De.a.item,"mr-3","mb-4",Object(xe.a)({},De.a.active,_)),ref:v,draggable:!0,"data-cy":"li-test",children:["bun"===s.type?null:f?Object(b.jsx)(d.Counter,{count:f}):null,Object(b.jsx)("div",{className:De.a.img,children:Object(b.jsx)("img",{src:t,alt:r})}),Object(b.jsxs)("span",{className:"".concat(De.a.price," mt-1"),children:[Object(b.jsx)("span",{className:"mr-1",children:n})," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("h3",{className:"text text_type_main-default mt-1",children:r})]})},Be=n(103),Pe=n.n(Be),He=function(e){var t=e.refCategory,n=e.type,a=e.items;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{ref:t,children:n}),Object(b.jsx)("ul",{className:Pe.a.list,children:a.map((function(e){return Object(b.jsx)(Ae,{srcImage:e.image,price:e.price,name:e.name,ingredient:e,id:e._id},e._id)}))})]})},Me=function(e,t){var n=Object(a.useRef)();return[n,function(){var a,r,s;e&&n&&n.current&&((null===n||void 0===n||null===(a=n.current)||void 0===a||null===(r=a.getBoundingClientRect())||void 0===r?void 0:r.top)-e.getBoundingClientRect().top<70&&t(null===n||void 0===n||null===(s=n.current)||void 0===s?void 0:s.textContent))}]},Ge=n(80),Le=n.n(Ge),Fe=function(){var e=l((function(e){return e.INGREDIENTS.data})),t=Object(a.useState)(""),n=Object(Ee.a)(t,2),r=n[0],s=n[1],c=e.filter((function(e){return"sauce"===e.type})),i=e.filter((function(e){return"main"===e.type})),o=e.filter((function(e){return"bun"===e.type})),u=Object(a.useRef)(null);Object(a.useEffect)((function(){s("\u0411\u0443\u043b\u043a\u0438")}),[]);var j=Me(u.current,s),p=Object(Ee.a)(j,2),m=p[0],f=p[1],h=Me(u.current,s),x=Object(Ee.a)(h,2),O=x[0],_=x[1],v=Me(u.current,s),y=Object(Ee.a)(v,2),g=y[0],w=y[1];return Object(b.jsxs)("section",{className:"mr-5 ".concat(Le.a.item),"data-cy":"source",children:[Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(d.Tab,{value:"\u0411\u0443\u043b\u043a\u0438",active:"\u0411\u0443\u043b\u043a\u0438"===r,onClick:s,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(d.Tab,{value:"\u0421\u043e\u0443\u0441\u044b",active:"\u0421\u043e\u0443\u0441\u044b"===r,onClick:s,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)(d.Tab,{value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===r,onClick:s,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(b.jsxs)("div",{className:"".concat(Le.a.categories," mt-5"),onScroll:function(){f(),_(),w()},ref:u,children:[o.length?Object(b.jsx)(He,{refCategory:m,type:"\u0411\u0443\u043b\u043a\u0438",items:o}):null,c.length?Object(b.jsx)(He,{refCategory:O,type:"\u0421\u043e\u0443\u0441\u044b",items:c}):null,i.length?Object(b.jsx)(He,{refCategory:g,type:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",items:i}):null]})]})},Je=n(197),ze=n(81),Ze=n.n(ze),Ke=function(e){var t=e.index,n=e.name,r=e.image,s=e.price,c=e.isLocked,i=e.type,l=e.ingredient,u=Object(a.useRef)(null),j=o(),p=Object(Ue.a)({type:"ingredientsItem",item:{index:t,type:null===l||void 0===l?void 0:l.type},collect:function(e){return{isDrag:e.isDragging()}}}),m=Object(Ee.a)(p,2),f=m[0].isDrag,h=m[1],x=Object(Je.a)({accept:"ingredientsItem",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,n){var a;if(u.current&&void 0!==e.index&&"bun"!==e.type){var r=null===e||void 0===e?void 0:e.index,s=t;if(r!==s){var c=null===(a=u.current)||void 0===a?void 0:a.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=n.getClientOffset().y-c.top;r<s&&o<i||r>s&&o>i||(j(ue({idTo:s,idFrom:r})),e.index=s)}}}}),O=Object(Ee.a)(x,2),_=O[0].handlerId;h((0,O[1])(u));var v=f?0:1;return Object(b.jsxs)("div",{className:"".concat(Ze.a.item),ref:u,style:{opacity:v},"data-handler-id":_,children:[Object(b.jsxs)("div",{className:Ze.a.icon,children:[" ","top"!==i&&"bottom"!==i?Object(b.jsx)(d.DragIcon,{type:"primary"}):null]}),Object(b.jsx)(d.ConstructorElement,{type:i,isLocked:c,text:n,thumbnail:r,price:s,handleClose:function(){j(de(t))}})]})},Qe=n(32),We=n.n(Qe),Xe=function(){var e=Object(j.g)(),t=o(),n=Object(j.h)(),a=l((function(e){var t;return{bun:e.CONSTRUCTOR.bun,dataConstructor:e.CONSTRUCTOR.data,ingredients:e.INGREDIENTS.data,isBunEmpty:e.CONSTRUCTOR.isBunEmpty,user:null===(t=e.AUTH)||void 0===t?void 0:t.user}})),r=a.bun,s=a.dataConstructor,c=a.ingredients,i=a.isBunEmpty,u=a.user,p=Object(Je.a)({accept:"ingredient",drop:function(e){!function(e){var n=c.filter((function(t){return t._id===e.ingredient._id})),a=Object(Ee.a)(n,1)[0];"bun"===a.type?(t(le(a)),t(oe(a)),t(je(!1))):t(ie(a))}(e)},collect:function(e){return{isHover:e.isOver()}}}),m=Object(Ee.a)(p,2),f=m[0].isHover,h=m[1];return Object(b.jsxs)("section",{className:_e()(We.a.section,Object(xe.a)({},We.a.active,f)),ref:h,"data-cy":"dnd-target",children:[r?Object(b.jsx)(Ke,{type:"top",isLocked:!0,name:r.name,image:r.image_mobile,price:r.price,ingredient:r}):null,Object(b.jsx)("div",{className:"".concat(We.a.constructor," mb-1 mt-1"),children:s.map((function(e,t){return"bun"!==e.type?Object(b.jsx)(Ke,{index:t,name:e.name,image:e.image_mobile,price:e.price,ingredient:e},e.key):null}))}),r?Object(b.jsx)(Ke,{type:"bottom",isLocked:!0,name:r.name,image:r.image_mobile,price:r.price,ingredient:r}):null,Object(b.jsxs)("div",{className:"".concat(We.a.total," mt-5"),children:[Object(b.jsxs)("span",{className:"".concat(We.a.price," text mr-5"),children:[Object(b.jsx)("output",{className:"mr-1",children:s.length?s.reduce((function(e,t){return"bun"===t.type?+e+2*+t.price:+e+ +t.price}),[0]):0}),Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)(d.Button,{type:"primary",size:"medium",onClick:function(){s.length&&(r?u?(t(je(!1)),t(G(s)),t(q(!0))):e.push({pathname:"/login",state:n}):t(je(!0)))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),i&&Object(b.jsx)("div",{className:We.a.message,children:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u0443\u043b\u043a\u0443!"})]})},Ve=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"container",style:{padding:"0 16px"},children:Object(b.jsx)("h2",{className:"mb-2 mt-5 text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(b.jsx)("div",{className:"container flex__wrapper",children:Object(b.jsxs)(Se.a,{backend:Ie.a,children:[Object(b.jsx)(Fe,{}),Object(b.jsx)(Xe,{})]})})]})},Ye=function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("h1",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 404. \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!"})})},$e=n(56),qe=n(33),et=n.n(qe),tt=function(e){var t=e.headingText,n=e.type,r=e.buttonText,s=e.emailText,c=void 0===s?"E-mail":s,i=e.passText,l=void 0===i?"\u041f\u0430\u0440\u043e\u043b\u044c":i,p=Object(j.g)(),m=Object(j.h)().state,f=o(),h=Object(a.useState)({email:"",password:"",name:""}),x=Object(Ee.a)(h,2),O=x[0],_=x[1],v=function(e){_((function(t){return Object(D.a)(Object(D.a)({},t),{},Object(xe.a)({},e.target.name,e.target.value))}))};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:et.a.wrapper,children:[Object(b.jsx)("h2",{className:"text text_type_main-medium",children:t}),Object(b.jsxs)("form",{action:"#",className:et.a.form,onSubmit:function(e){e.preventDefault(),"login"===n&&f(J({email:O.email,password:O.password})),"register"===n&&f(Z({email:O.email,password:O.password,name:O.name})),"reset"===n&&f(F({password:O.password,token:"Bearer ".concat(B("accessToken"))})),"forgot"===n&&(f(L({email:O.email})),p.replace({pathname:"/reset-password",state:Object($e.a)(m)}))},children:["register"===n?Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",onChange:v,value:O.name||""})}):null,"reset"===n?null:Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsx)(d.Input,{type:"email",placeholder:c,name:"email",onChange:v,value:O.email||""})}),"forgot"===n?null:Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsx)(d.Input,{type:"password",placeholder:l,icon:"ShowIcon",name:"password",onChange:v,value:O.password||""})}),"reset"===n?Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"token",onChange:v,value:O.token||""})}):null,Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsx)(d.Button,{type:"primary",children:r})})]}),"register"===n?Object(b.jsxs)("span",{className:"text text_type_main-default",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(b.jsx)(u.c,{className:et.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]}):"login"===n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("span",{className:"text text_type_main-default",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(b.jsx)(u.c,{className:et.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("span",{className:"text text_type_main-default mt-3",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(b.jsx)(u.c,{className:et.a.link,to:"/forgot-password",exact:!0,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]}):"forgot"===n||"reset"===n?Object(b.jsxs)("span",{className:"text text_type_main-default",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(b.jsx)(u.c,{className:et.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]}):null]})})},nt=function(){var e=l((function(e){return{registerStatus:e.AUTH.registerStatus,status:e.AUTH.status,user:e.AUTH.user}})),t=e.registerStatus,n=e.user;return"loading"===e.status?Object(b.jsx)(ae,{}):"success"===t||n?Object(b.jsx)(j.a,{to:"/"}):Object(b.jsx)(tt,{type:"register",headingText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})},at=function(){var e=l((function(e){return{status:e.AUTH.status,user:e.AUTH.user}})),t=e.user,n=e.status,a=Object(j.h)();return function(){var e;return"loading"===n?Object(b.jsx)(ae,{}):t?Object(b.jsx)(j.a,{to:{pathname:null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.pathname}||"/"}):Object(b.jsx)(tt,{type:"login",headingText:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438"})}()},rt=function(){var e=l((function(e){return{status:e.AUTH.status,user:e.AUTH.user}})),t=e.status,n=e.user,r=Object(j.g)(),s=Object(j.j)().path;Object(a.useEffect)((function(){r.replace({state:[{path:s}]})}),[]);return"loading"===t?Object(b.jsx)(ae,{}):n?Object(b.jsx)(j.a,{to:"/"}):Object(b.jsx)(tt,{type:"forgot",headingText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",emailText:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})},st=function(){var e=l((function(e){return{status:e.AUTH.status}})).status,t=Object(j.h)().state;return"loading"===e?Object(b.jsx)(ae,{}):t?Object(b.jsx)(tt,{type:"reset",headingText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",passText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}):Object(b.jsx)(j.a,{to:"/forgot-password"})},ct=n(26),it=n.n(ct),ot=function(e){var t=e.id,n=e.status,a=e.ingredientsId,r=e.ingredients,s=e.name,c=e.date,i=Object(j.j)().path,o=Object(j.h)(),l=a.map((function(e){return r.filter((function(t){return t._id===e}))[0].image})),p=new Date,m="".concat(p.getFullYear(),"-").concat(p.getMonth()+1<10?"0".concat(p.getMonth()+1):p.getMonth()+1,"-").concat(p.getDate()<10?"0".concat(p.getDate()):p.getDate()),f=null===c||void 0===c?void 0:c.slice(0,10),h=null===c||void 0===c?void 0:c.slice(11,19);return Object(b.jsxs)(u.b,{to:{pathname:"".concat(i,"/").concat(t),state:{background:o}},className:"".concat(it.a.wrapper," p-6 mt-4"),children:[Object(b.jsxs)("div",{className:"".concat(it.a.header," mb-6"),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default",children:["#",t]}),Object(b.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:m===f?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(h," i-GMT+3"):"".concat(f," ").concat(h," i-GMT+3")})]}),Object(b.jsx)("div",{className:"".concat(it.a.body," mb-6"),children:s}),"created"===n?Object(b.jsx)("span",{className:"".concat(it.a.canceled," text text_type_main-small"),children:"\u0441\u043e\u0437\u0434\u0430\u043d"}):"done"===n?Object(b.jsx)("span",{className:"".concat(it.a.done," text text_type_main-small"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"pending"===n?Object(b.jsx)("span",{className:"".concat(it.a.preparing," text text_type_main-small"),children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}):null,Object(b.jsxs)("div",{className:"".concat(it.a.footer," mt-6"),children:[Object(b.jsxs)("div",{className:it.a.images,children:[l.map((function(e,t){return t<5?Object(b.jsxs)("div",{className:it.a.round,children:[" ",Object(b.jsx)("img",{src:e,alt:""})," "]},t):null})),l.length>5?Object(b.jsxs)("div",{className:it.a.round_more,children:[Object(b.jsx)("img",{src:l[5],alt:""}),Object(b.jsxs)("span",{className:"text text_type_digits-default",children:["+",l.length-5]})]}):null]}),Object(b.jsxs)("span",{className:"".concat(it.a.price," text text_type_digits-default"),children:[function(e,t){return e&&e.reduce((function(e,n){return"bun"===t.filter((function(e){return e._id===n}))[0].type?+e+2*t.filter((function(e){return e._id===n}))[0].price:+e+ +t.filter((function(e){return e._id===n}))[0].price}),[0])}(a,r),Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})},lt=n(104),ut=n.n(lt),dt=function(){var e=o();Object(a.useEffect)((function(){e(M())}),[]);var t=l((function(e){return{data:e.SOCKETS.data,dataIngredients:e.INGREDIENTS.data}})),n=t.data,r=t.dataIngredients;return Object(b.jsx)("div",{className:"".concat(ut.a.list," pr-2 pl-2"),children:n.length?n.map((function(e){return Object(b.jsx)(ot,{id:e.number,ingredientsId:e.ingredients,ingredients:r,name:e.name,status:e.status,date:e.createdAt},e._id)})):null})},jt=n(27),pt=n.n(jt),mt=function(){var e=l((function(e){return{total:e.SOCKETS.total,totalToday:e.SOCKETS.totalToday,data:e.SOCKETS.data}})),t=e.total,n=e.totalToday,a=e.data;return Object(b.jsxs)("div",{className:"container ".concat(pt.a.wrapper),children:[Object(b.jsx)("h2",{className:"mb-5 mt-5 text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("div",{className:pt.a.container,children:[Object(b.jsx)(dt,{}),Object(b.jsxs)("div",{className:pt.a.statistic,children:[Object(b.jsxs)("div",{className:"".concat(pt.a.header," mb-15"),children:[Object(b.jsxs)("div",{className:"".concat(pt.a.done," mr-9"),children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("ul",{className:pt.a.list,children:a.map((function(e){return"done"===e.status?Object(b.jsx)("li",{className:"text text_type_digits-default mb-2",children:e.number},e._id):null}))})]}),Object(b.jsxs)("div",{className:"".concat(pt.a.inWork),children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("ul",{className:pt.a.list,children:a.map((function(e){return"pending"===e.status?Object(b.jsx)("li",{className:"text text_type_digits-default mb-2",children:e.number},e._id):null}))})]})]}),Object(b.jsxs)("div",{className:"mb-15",children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("div",{className:"".concat(pt.a.allDone," text text_type_digits-large"),children:t})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("div",{className:"".concat(pt.a.allDay," text text_type_digits-large"),children:n})]})]})]})]})},bt=Object(I.c)({name:"WS",initialState:{data:[],wsStatus:!1,total:0,totalToday:0,statusGetOrder:"",order:null},reducers:{wsConnectionStart:function(){},wsConnectionSuccess:function(e){e.wsStatus=!0,e.error=null},wsConnectionFailed:function(e,t){var n=t.payload;e.wsStatus=!1,e.error=n},wsConnectionClosed:function(e,t){var n=t.payload;e.wsStatus=!1,e.data=[],e.error=n},wsGetMessage:function(e,t){var n=t.payload;e.data=Object($e.a)(n.orders),e.total=+n.total,e.totalToday=+n.totalToday},wsSendMessage:function(){},wsCloseSocketConnection:function(e){e.data=[],e.wsStatus=!1}},extraReducers:function(e){e.addCase(X.pending,(function(e){e.statusGetOrder="loading"})),e.addCase(X.fulfilled,(function(e,t){e.statusGetOrder="success",e.order=t.payload.orders[0]}))}}),ft=bt.reducer,ht=bt.actions,xt=ht.wsConnectionClosed,Ot=ht.wsConnectionFailed,_t=ht.wsConnectionSuccess,vt=ht.wsGetMessage,yt=ht.wsConnectionStart,gt=ht.wsSendMessage,wt=ht.wsCloseSocketConnection,Nt=function(){var e=o();return Object(a.useEffect)((function(){return e(yt("wss://norma.nomoreparties.space/orders/all")),function(){e(wt())}}),[]),Object(b.jsx)(mt,{})},kt=n(34),Tt=n.n(kt),Ct=function(){var e=o();return Object(b.jsxs)("div",{className:"".concat(Tt.a.navbar," mr-15"),children:[Object(b.jsx)(u.c,{exact:!0,to:"/profile",className:Tt.a.link,activeClassName:Tt.a.active,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(b.jsx)(u.c,{exact:!0,to:"/profile/orders",className:Tt.a.link,activeClassName:Tt.a.active,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)(u.c,{to:"/login",className:Tt.a.link,onClick:function(){e(W())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(b.jsx)("div",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},St=n(38),It=n.n(St),Et=function(){var e=o(),t=l((function(e){var t,n;return{name:null===(t=e.AUTH)||void 0===t?void 0:t.user.user.name,email:null===(n=e.AUTH)||void 0===n?void 0:n.user.user.email}})),n=t.name,r=t.email,s=Object(a.useState)({}),c=Object(Ee.a)(s,2),i=c[0],u=c[1];Object(a.useEffect)((function(){e(K()),u((function(e){return Object(D.a)(Object(D.a)({},e),{},{name:n,email:r})}))}),[n]);var j=function(e){u((function(t){return Object(D.a)(Object(D.a)({},t),{},Object(xe.a)({},e.target.name,e.target.value))}))};return Object(b.jsxs)("form",{className:"ml-15",onSubmit:function(t){t.preventDefault(),e(Q({name:i.name,email:i.email}))},children:[Object(b.jsx)("div",{className:"".concat(It.a.wrapper," mb-6"),children:Object(b.jsx)(d.Input,{value:i.name||"",onChange:j,type:"text",name:"name",placeholder:"\u0418\u043c\u044f",icon:"EditIcon"})}),Object(b.jsx)("div",{className:"".concat(It.a.wrapper," mb-6"),children:Object(b.jsx)(d.Input,{value:i.email||"",onChange:j,type:"email",name:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon"})}),Object(b.jsx)("div",{className:"".concat(It.a.wrapper," mb-6"),children:Object(b.jsx)(d.Input,{value:i.password||"",onChange:j,type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon"})}),Object(b.jsxs)("div",{className:"".concat(It.a.wrapper," mb-6"),children:[Object(b.jsx)("button",{className:It.a.button,type:"button",onClick:function(e){e.preventDefault(),u((function(e){return Object(D.a)(Object(D.a)({},e),{},{name:n,email:r})}))},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(b.jsx)(d.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Ut=function(){return Object(b.jsx)(Et,{})},Rt=function(){return Object(b.jsxs)("div",{className:"container pt-25 df",children:[Object(b.jsx)(Ct,{}),Object(b.jsx)(Ut,{})]})},Dt=function(){var e="wss://norma.nomoreparties.space/orders?token=".concat(B("accessToken")),t=o();return Object(a.useEffect)((function(){return t(yt(e)),function(){t(xt())}}),[]),Object(b.jsxs)("div",{className:"container pt-25 df",children:[Object(b.jsx)(Ct,{}),Object(b.jsx)(dt,{})]})},At=n(14),Bt=n.n(At),Pt=function(e){var t=e.isModal,n=o(),r=Object(j.i)().id,s=l((function(e){return{ingredients:e.INGREDIENTS.data,status:e.SOCKETS.statusGetOrder,getStatusIngredients:e.INGREDIENTS.status,order:e.SOCKETS.order}})),c=s.ingredients,i=s.status,u=s.order,p=s.getStatusIngredients;Object(a.useEffect)((function(){n(X(r))}),[]);var m,f,h,x,O=function(e,t){return e&&e.reduce((function(e,n){return"bun"===t.filter((function(e){return e._id===n}))[0].type?+e+2*t.filter((function(e){return e._id===n}))[0].price:+e+ +t.filter((function(e){return e._id===n}))[0].price}),[0])},_=function(e,t,n){return(e&&e.filter((function(e){return e._id===t}))[0][n]).toString()},v=new Date,y="".concat(v.getFullYear(),"-").concat(v.getMonth()+1<10?"0".concat(v.getMonth()+1):v.getMonth()+1,"-").concat(v.getDate()<10?"0".concat(v.getDate()):v.getDate());"success"===i&&(m=null===(h=u.createdAt)||void 0===h?void 0:h.slice(0,10),f=null===(x=u.createdAt)||void 0===x?void 0:x.slice(11,19));return"loading"===i&&"loading"===p?Object(b.jsx)(ae,{}):"success"===i&&"success"===p&&u?Object(b.jsx)("div",{className:_e()(Bt.a.wrapper,Object(xe.a)({},Bt.a.nomodal,!t)),children:Object(b.jsxs)("div",{className:Bt.a.info,children:[Object(b.jsxs)("div",{className:"".concat(Bt.a.header," text text_type_digits-default mb-10"),children:["#",r]}),Object(b.jsxs)("div",{className:"mb-10",children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-3",children:u.name}),Object(b.jsx)("span",{className:"".concat(Bt.a.status," mb-15"),children:"created"===u.status?Object(b.jsx)("span",{className:"".concat(Bt.a.canceled," text text_type_main-small"),children:"\u0441\u043e\u0437\u0434\u0430\u043d"}):"done"===u.status?Object(b.jsx)("span",{className:"".concat(Bt.a.done," text text_type_main-small"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"pending"===u.status?Object(b.jsx)("span",{className:"".concat(Bt.a.preparing," text text_type_main-small"),children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}):null}),Object(b.jsxs)("div",{className:"".concat(Bt.a.structure),children:[Object(b.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("ul",{className:"".concat(Bt.a.list),children:u.ingredients.map((function(e,t){return Object(b.jsxs)("li",{className:"".concat(Bt.a.item),children:[Object(b.jsx)("div",{className:Bt.a.img,children:Object(b.jsx)("img",{src:_(c,e,"image"),alt:""})}),Object(b.jsx)("span",{children:_(c,e,"name")}),Object(b.jsxs)("span",{className:Bt.a.price,children:[" ","1 x"," ",_(c,e,"price")," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})," "]})]},t)}))})]})]}),Object(b.jsxs)("div",{className:"".concat(Bt.a.footer),children:[Object(b.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:y===m?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(f," i-GMT+3"):"".concat(m," ").concat(f," i-GMT+3")}),Object(b.jsxs)("span",{className:"".concat(Bt.a.total),children:[O(u.ingredients,c)," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})}):Object(b.jsx)(ae,{})},Ht=function(){var e,t=o(),n=Object(j.g)(),a=Object(j.h)(),r=("PUSH"===n.action||"REFRESH"===n.action)&&(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.background);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(j.d,{location:r||a,children:[Object(b.jsx)(j.b,{exact:!0,path:"/",children:Object(b.jsx)(Ve,{})}),Object(b.jsx)(j.b,{path:"/ingredients/:id",children:Object(b.jsx)(Ce,{})}),Object(b.jsx)(j.b,{exact:!0,path:"/feed",children:Object(b.jsx)(Nt,{})}),Object(b.jsx)(j.b,{path:"/feed/:id",children:Object(b.jsx)(Pt,{})}),Object(b.jsx)(j.b,{path:"/register",children:Object(b.jsx)(nt,{})}),Object(b.jsx)(j.b,{exact:!0,path:"/login",children:Object(b.jsx)(at,{})}),Object(b.jsx)(j.b,{path:"/forgot-password",children:Object(b.jsx)(rt,{})}),Object(b.jsx)(j.b,{path:"/reset-password",children:Object(b.jsx)(st,{})}),Object(b.jsx)(he,{exact:!0,path:"/profile",children:Object(b.jsx)(Rt,{})}),Object(b.jsx)(he,{exact:!0,path:"/profile/orders",children:Object(b.jsx)(Dt,{})}),Object(b.jsx)(he,{exact:!0,path:"/profile/orders/:id",children:Object(b.jsx)(Pt,{})}),Object(b.jsx)(j.b,{path:"*",children:Object(b.jsx)(Ye,{})})]}),r&&Object(b.jsx)(j.b,{path:"/ingredients/:id",children:Object(b.jsx)(k,{closedFunction:function(){t(Te())},children:Object(b.jsx)(Ce,{isModal:!0})})}),r&&Object(b.jsx)(j.b,{path:"/feed/:id",children:Object(b.jsx)(k,{children:Object(b.jsx)(Pt,{isModal:!0})})}),r&&Object(b.jsx)(j.b,{path:"/profile/orders/:id",children:Object(b.jsx)(k,{children:Object(b.jsx)(Pt,{isModal:!0})})})]})},Mt=(n(188),function(){var e=o(),t=l((function(e){return{isShowOrder:e.MODAL.isShowOrder,refreshStatus:e.AUTH.refreshStatus}})),n=t.isShowOrder,r=t.refreshStatus;return Object(a.useEffect)((function(){localStorage.getItem("refreshToken")&&e(z()),e(M())}),[]),Object(a.useEffect)((function(){localStorage.getItem("refreshToken")&&e(K())}),[r]),Object(b.jsxs)(b.Fragment,{children:[n&&Object(b.jsx)(me,{}),Object(b.jsx)("main",{className:"main",children:Object(b.jsxs)(u.a,{children:[Object(b.jsx)(f,{}),Object(b.jsx)(Ht,{})]})})]})}),Gt=n(105),Lt=n.n(Gt),Ft=Object(I.c)({name:"AUTH",initialState:{status:"",user:null,refreshStatus:"",registerStatus:"",resetPasswordStatus:"",stateHistory:""},reducers:{},extraReducers:function(e){e.addCase(L.fulfilled,(function(e){e.resetPasswordStatus="success"})),e.addCase(F.fulfilled,(function(e){e.resetPasswordStatus="success"})),e.addCase(Z.pending,(function(e){e.registerStatus="loading"})),e.addCase(Z.fulfilled,(function(e){e.registerStatus="success"})),e.addCase(Z.rejected,(function(e){e.registerStatus="failed"})),e.addCase(J.pending,(function(e){e.status="loading"})),e.addCase(J.fulfilled,(function(e,t){e.status="success",e.user=t.payload})),e.addCase(J.rejected,(function(e){e.status="failed"})),e.addCase(Q.pending,(function(e){e.status="loading"})),e.addCase(Q.fulfilled,(function(e,t){e.status="success",e.user=t.payload})),e.addCase(Q.rejected,(function(e){e.status="failed"})),e.addCase(K.pending,(function(e){e.status="loading"})),e.addCase(K.fulfilled,(function(e,t){e.user=t.payload,e.status="success"})),e.addCase(K.rejected,(function(e){e.status="failed"})),e.addCase(z.fulfilled,(function(e){e.refreshStatus="success"})),e.addCase(W.pending,(function(e){e.user=null,e.status=""}))}}).reducer,Jt=Object(I.a)({reducer:{INGREDIENTS:we,CONSTRUCTOR:se,MODAL:Y,AUTH:Ft,SOCKETS:ft},middleware:function(e){return e().concat(Lt.a,(function(e){var t=null;return function(n){return function(a){var r=e.dispatch,s=a.type,c=a.payload;if(s===yt.type&&(t=new WebSocket(c)),t){if(t.onopen=function(e){r(_t())},t.onerror=function(e){r(Ot(e))},t.onmessage=function(e){var t=e.data;r(vt(JSON.parse(t)))},t.onclose=function(e){var t=e.code;r(xt(t))},s===gt.type){var i=c;t.send(JSON.stringify(i))}s===wt.type&&t.close()}n(a)}}}))},devTools:!1});n(189);c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(i.a,{store:Jt,children:Object(b.jsx)(Mt,{})})}),document.getElementById("root"))},26:function(e,t,n){e.exports={wrapper:"style_wrapper__pZldf",header:"style_header__2J_50",body:"style_body__35MhS",footer:"style_footer__rte1v",images:"style_images__1Iu6y",round:"style_round__1Pj__",round_more:"style_round_more__tMCxl",price:"style_price__2lXOn",canceled:"style_canceled__3CoyR",done:"style_done__zUKlQ",preparing:"style_preparing__oZn0g"}},27:function(e,t,n){e.exports={wrapper:"style_wrapper__zjUkX",container:"style_container__2sAr9",statistic:"style_statistic__2Kat_",header:"style_header__1HrCx",done:"style_done__3pzuP",list:"style_list__1zGRv",inWork:"style_inWork__3SGsp",allDone:"style_allDone__XmTV_",allDay:"style_allDay__1BZcR"}},31:function(e,t,n){e.exports={wrapper:"style_wrapper__194QW",title:"style_title__wYbpc",image:"style_image__3b2pX",bottom:"style_bottom__cyRXZ",dark:"style_dark__XCOuZ"}},32:function(e,t,n){e.exports={section:"style_section__3ZM0C",constructor:"style_constructor__3tzgL",active:"style_active__3Gv1h",total:"style_total__2wH-k",price:"style_price__sdYm7",message:"style_message__1aoB0"}},33:function(e,t,n){e.exports={wrapper:"style_wrapper__1AtLL",form:"style_form__1N5gI",link:"style_link__lB4S2"}},34:function(e,t,n){e.exports={navbar:"style_navbar__smDuw",link:"style_link__3_Ucy",active:"style_active__GGax9"}},38:function(e,t,n){e.exports={wrapper:"style_wrapper__3B_s-",button:"style_button__2c15i"}},48:function(e,t,n){e.exports={item:"style_item__2aQ6N",img:"style_img__1gxBo",price:"style_price__bZnQM",active:"style_active__2MrUt"}},58:function(e,t,n){e.exports={modal:"style_modal__1RGQB",header:"style_header__1FXqj",close:"style_close__3GZu3"}},80:function(e,t,n){e.exports={item:"style_item__3MSZp",categories:"style_categories__P8HNB"}},81:function(e,t,n){e.exports={item:"style_item__rGo0t",icon:"style_icon__3eRNc"}}},[[190,1,2]]]);
//# sourceMappingURL=main.f652a4fd.chunk.js.map